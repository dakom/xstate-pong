!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=32)}([function(t,e,n){"use strict";n.d(e,"d",function(){return c}),n.d(e,"h",function(){return f}),n.d(e,"b",function(){return l}),n.d(e,"n",function(){return d}),n.d(e,"p",function(){return h}),n.d(e,"l",function(){return p}),n.d(e,"g",function(){return v}),n.d(e,"f",function(){return g}),n.d(e,"k",function(){return y}),n.d(e,"i",function(){return m}),n.d(e,"o",function(){return b}),n.d(e,"a",function(){return S}),n.d(e,"m",function(){return w}),n.d(e,"e",function(){return O}),n.d(e,"c",function(){return x}),n.d(e,"j",function(){return E}),n.d(e,"r",function(){return T}),n.d(e,"q",function(){return j});var r=n(3),i=n(9),o=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},a=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},s=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t};function u(t){return"string"!=typeof t&&("value"in t&&"tree"in t&&"history"in t)}function c(t){return Object.keys(t)}function f(t,e,n){void 0===n&&(n=i.b);var r=h(t,n),o=h(e,n);return"string"==typeof o?"string"==typeof r&&o===r:"string"==typeof r?r in o:c(r).every(function(t){return t in o&&f(r[t],o[t])})}function l(t){try{return"string"==typeof t||"number"==typeof t?""+t:t.type}catch(t){throw new Error("Events must be strings or objects with a string event.type property.")}}function d(t,e){try{return Array.isArray(t)?t:t.toString().split(e)}catch(e){throw new Error("'"+t+"' is not a valid state path.")}}function h(t,e){return u(t)?t.value:Array.isArray(t)?p(t):"string"==typeof t||u(t)?p(d(t,e)):t}function p(t){if(1===t.length)return t[0];for(var e={},n=e,r=0;r<t.length-1;r++)r===t.length-2?n[t[r]]=t[r+1]:(n[t[r]]={},n=n[t[r]]);return e}function v(t,e){var n={};return c(t).forEach(function(r,i){n[r]=e(t[r],r,t,i)}),n}function g(t,e,n){var r={};return c(t).forEach(function(i){var o=t[i];n(o)&&(r[i]=e(o,i,t))}),r}var y=function(t){return function(e){var n,r,i=e;try{for(var a=o(t),s=a.next();!s.done;s=a.next()){i=i[s.value]}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i}};function m(t,e){return function(n){var r,i,a=n;try{for(var s=o(t),u=s.next();!u.done;u=s.next()){var c=u.value;a=a[e][c]}}catch(t){r={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return a}}var b=function(t){return t?"string"==typeof t?[[t]]:S(c(t).map(function(e){var n=t[e];return"string"==typeof n||Object.keys(n).length?b(t[e]).map(function(t){return[e].concat(t)}):[[e]]})):[[]]};function S(t){var e;return(e=[]).concat.apply(e,s(t))}function w(t){return Array.isArray(t)?t:void 0===t?[]:[t]}function O(t,e,n){var r,i;if("function"==typeof t)return t(e,n);var a={};try{for(var s=o(c(t)),u=s.next();!u.done;u=s.next()){var f=u.value,l=t[f];a[f]="function"==typeof l?l(e,n):l}}catch(t){r={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return a}function x(t){return 0===t.indexOf(r.a.DoneState)||0===t.indexOf(r.a.DoneInvoke)||(t===r.a.ErrorCommunication||t===r.a.ErrorCommunication)}function E(t,e){var n,r,i=a([[],[]],2),s=i[0],u=i[1];try{for(var c=o(t),f=c.next();!f.done;f=c.next()){var l=f.value;e(l)?s.push(l):u.push(l)}}catch(t){n={error:t}}finally{try{f&&!f.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return[s,u]}function _(t,e){return v(t.states,function(t,n){if(t){var r=("string"==typeof e?void 0:e[n])||(t?t.current:void 0);if(r)return{current:r,states:_(t,r)}}})}function T(t,e){return{current:e,states:_(t,e)}}function j(t,e,n){return t?n.reduce(function(t,n){var i=n.assignment,o={};return"function"==typeof i?o=i(t,e||{type:r.a.Init}):c(i).forEach(function(n){var r=i[n];o[n]="function"==typeof r?r(t,e):r}),Object.assign({},t,o)},t):t}},function(t,e,n){"use strict";n.d(e,"g",function(){return u}),n.d(e,"q",function(){return c}),n.d(e,"o",function(){return l}),n.d(e,"p",function(){return d}),n.d(e,"i",function(){return h}),n.d(e,"k",function(){return p}),n.d(e,"j",function(){return v}),n.d(e,"l",function(){return g}),n.d(e,"h",function(){return y}),n.d(e,"c",function(){return m}),n.d(e,"m",function(){return b}),n.d(e,"n",function(){return S}),n.d(e,"b",function(){return w}),n.d(e,"a",function(){return O}),n.d(e,"d",function(){return x}),n.d(e,"e",function(){return E}),n.d(e,"f",function(){return _});var r=n(3),i=n(4),o=n(0),a=function(){return(a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},s=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n},u={type:i.d};function c(t){return"string"==typeof t||"number"==typeof t?{type:t}:t}function f(t,e){if(e){var n=e[t];if(n)return n}}function l(t,e){var n;if("string"==typeof t||"number"==typeof t){var r=f(t,e);n="function"==typeof r?{type:t,exec:r}:r||{type:t,exec:void 0}}else if("function"==typeof t)n={type:t.name||t.toString(),exec:t};else{if("function"==typeof(r=f(t.type,e)))n=a({},t,{exec:r});else if(r){var i=t.type,o=s(t,["type"]);n=a({type:i},r,o)}else n=t}return Object.defineProperty(n,"toString",{value:function(){return n.type},enumerable:!1,configurable:!0}),n}function d(t){var e=l(t);return a({id:"string"==typeof t?t:e.id},e,{type:e.type})}function h(t){return{type:i.h,event:t}}function p(t,e){return{to:e?e.to:void 0,type:i.i,event:"function"==typeof t?t:c(t),delay:e?e.delay:void 0,id:e&&void 0!==e.id?e.id:"function"==typeof t?t.name:Object(o.b)(t)}}function v(t,e,n){var r="function"==typeof t.event?c(t.event(e,n)):c(t.event),i="function"==typeof t.delay?t.delay(e,n):t.delay;return a({},t,{event:r,delay:i})}function g(t,e){return p(t,a({},e,{to:r.b.Parent}))}function y(t,e){return void 0===t&&(t=function(t,e){return{context:t,event:e}}),{type:i.f,label:e,expr:t}}var m=function(t){return{type:i.b,sendId:t}};function b(t){var e=d(t);return{type:r.a.Start,activity:e,exec:void 0}}function S(t){var e=d(t);return{type:r.a.Stop,activity:e,exec:void 0}}var w=function(t){return{type:i.a,assignment:t}};function O(t,e){var n=e?"#"+e:"";return r.a.After+"("+t+")"+n}function x(t,e){var n=r.a.DoneState+"."+t,i={type:n,data:e,toString:function(){return n}};return i}function E(t,e){var n=r.a.DoneInvoke+"."+t,i={type:n,data:e,toString:function(){return n}};return i}function _(t,e){return{src:e,type:r.a.ErrorExecution,data:t}}},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(10),o=n(28),a=n(12),s=n(13);e.URI="Option";var u=function(){function t(){this._tag="None"}return t.prototype.map=function(t){return e.none},t.prototype.mapNullable=function(t){return e.none},t.prototype.ap=function(t){return e.none},t.prototype.ap_=function(t){return t.ap(this)},t.prototype.chain=function(t){return e.none},t.prototype.reduce=function(t,e){return t},t.prototype.alt=function(t){return t},t.prototype.orElse=function(t){return t()},t.prototype.extend=function(t){return e.none},t.prototype.fold=function(t,e){return t},t.prototype.foldL=function(t,e){return t()},t.prototype.getOrElse=function(t){return t},t.prototype.getOrElseL=function(t){return t()},t.prototype.toNullable=function(){return null},t.prototype.toUndefined=function(){},t.prototype.inspect=function(){return this.toString()},t.prototype.toString=function(){return"none"},t.prototype.contains=function(t,e){return!1},t.prototype.isNone=function(){return!0},t.prototype.isSome=function(){return!1},t.prototype.exists=function(t){return!1},t.prototype.filter=function(t){return e.none},t.prototype.refine=function(t){return e.none},t.value=new t,t}();e.None=u,e.none=u.value;var c=function(){function t(t){this.value=t,this._tag="Some"}return t.prototype.map=function(e){return new t(e(this.value))},t.prototype.mapNullable=function(t){return e.fromNullable(t(this.value))},t.prototype.ap=function(n){return n.isNone()?e.none:new t(n.value(this.value))},t.prototype.ap_=function(t){return t.ap(this)},t.prototype.chain=function(t){return t(this.value)},t.prototype.reduce=function(t,e){return e(t,this.value)},t.prototype.alt=function(t){return this},t.prototype.orElse=function(t){return this},t.prototype.extend=function(e){return new t(e(this))},t.prototype.fold=function(t,e){return e(this.value)},t.prototype.foldL=function(t,e){return e(this.value)},t.prototype.getOrElse=function(t){return this.value},t.prototype.getOrElseL=function(t){return this.value},t.prototype.toNullable=function(){return this.value},t.prototype.toUndefined=function(){return this.value},t.prototype.inspect=function(){return this.toString()},t.prototype.toString=function(){return"some("+i.toString(this.value)+")"},t.prototype.contains=function(t,e){return t.equals(this.value,e)},t.prototype.isNone=function(){return!1},t.prototype.isSome=function(){return!0},t.prototype.exists=function(t){return t(this.value)},t.prototype.filter=function(t){return this.exists(t)?this:e.none},t.prototype.refine=function(t){return this.filter(t)},t}();e.Some=c,e.getSetoid=function(t){return s.fromEquals(function(e,n){return e.isNone()?n.isNone():!n.isNone()&&t.equals(e.value,n.value)})},e.getOrd=function(t){return a.fromCompare(function(e,n){return e.isSome()?n.isSome()?t.compare(e.value,n.value):1:-1})};e.some=function(t){return new c(t)};var f=e.some,l=function(t,e){return t.chain(e)},d=function(t,e){return t.alt(e)};e.getApplySemigroup=function(t){return{concat:function(n,r){return n.isSome()&&r.isSome()?e.some(t.concat(n.value,r.value)):e.none}}},e.getApplyMonoid=function(t){return r({},e.getApplySemigroup(t),{empty:e.some(t.empty)})},e.getFirstMonoid=function(){return{concat:d,empty:e.none}},e.getLastMonoid=function(){return o.getDualMonoid(e.getFirstMonoid())},e.getMonoid=function(t){return{concat:function(n,r){return n.isNone()?r:r.isNone()?n:e.some(t.concat(n.value,r.value))},empty:e.none}},e.fromNullable=function(t){return null==t?e.none:new c(t)},e.fromPredicate=function(t){return function(n){return t(n)?e.some(n):e.none}},e.tryCatch=function(t){try{return e.some(t())}catch(t){return e.none}},e.fromEither=function(t){return t.isLeft()?e.none:e.some(t.value)},e.isSome=function(t){return t.isSome()},e.isNone=function(t){return t.isNone()},e.fromRefinement=function(t){return function(n){return t(n)?e.some(n):e.none}},e.getRefinement=function(t){return function(e){return t(e).isSome()}};var h=function(t){if(t.isNone())return{left:e.none,right:e.none};var n=t.value;return n.isLeft()?{left:e.some(n.value),right:e.none}:{left:e.none,right:e.some(n.value)}},p=l;e.option={URI:e.URI,map:function(t,e){return t.map(e)},of:f,ap:function(t,e){return e.ap(t)},chain:l,reduce:function(t,e,n){return t.reduce(e,n)},foldMap:function(t){return function(e,n){return e.isNone()?t.empty:n(e.value)}},foldr:function(t,e,n){return t.isNone()?e:n(t.value,e)},traverse:function(t){return function(n,r){return n.isNone()?t.of(e.none):t.map(r(n.value),e.some)}},sequence:function(t){return function(n){return n.isNone()?t.of(e.none):t.map(n.value,e.some)}},zero:function(){return e.none},alt:d,extend:function(t,e){return t.extend(e)},compact:function(t){return t.chain(i.identity)},separate:h,filter:function(t,e){return t.filter(e)},filterMap:p,partition:function(t,e){return{left:t.filter(i.not(e)),right:t.filter(e)}},partitionMap:function(t,e){return h(t.map(e))},wither:function(t){return function(e,n){return e.isNone()?t.of(e):n(e.value)}},wilt:function(t){return function(n,r){return n.isNone()?t.of({left:e.none,right:e.none}):t.map(r(n.value),function(t){return t.isLeft()?{left:e.some(t.value),right:e.none}:{left:e.none,right:e.some(t.value)}})}}}},function(t,e,n){"use strict";var r,i;n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i}),function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication"}(r||(r={})),function(t){t.Parent="#_parent",t.Internal="#_internal"}(i||(i={}))},function(t,e,n){"use strict";n.d(e,"j",function(){return i}),n.d(e,"k",function(){return o}),n.d(e,"h",function(){return a}),n.d(e,"i",function(){return s}),n.d(e,"b",function(){return u}),n.d(e,"g",function(){return c}),n.d(e,"a",function(){return f}),n.d(e,"f",function(){return l}),n.d(e,"d",function(){return d}),n.d(e,"e",function(){return h}),n.d(e,"c",function(){return p});var r=n(3),i=r.a.Start,o=r.a.Stop,a=r.a.Raise,s=r.a.Send,u=r.a.Cancel,c=r.a.NullEvent,f=r.a.Assign,l=(r.a.After,r.a.DoneState,r.a.Log),d=r.a.Init,h=r.a.Invoke,p=r.a.ErrorExecution},function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return c});var r=n(3),i=n(9),o=n(0),a=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},s=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t};function u(t,e){if(t===e)return!0;if(void 0===t||void 0===e)return!1;if("string"==typeof t||"string"==typeof e)return t===e;var n=Object(o.d)(t),r=Object(o.d)(e);return n.length===r.length&&n.every(function(n){return u(t[n],e[n])})}var c=function(){function t(t){this.actions=[],this.activities=i.a,this.meta={},this.events=[],this.value=t.value,this.context=t.context,this.event=t.event,this.historyValue=t.historyValue,this.history=t.history,this.actions=t.actions||[],this.activities=t.activities||i.a,this.meta=t.meta||{},this.events=t.events||[],Object.defineProperty(this,"tree",{value:t.tree,enumerable:!1})}return t.from=function(e,n){return e instanceof t?e.context!==n?new t({value:e.value,context:n,event:e.event,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,meta:{},events:[],tree:e.tree}):e:new t({value:e,context:n,event:{type:r.a.Init},historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[]})},t.create=function(e){return new t(e)},t.inert=function(e,n){if(e instanceof t){if(!e.actions.length)return e;var i={type:r.a.Init};return new t({value:e.value,context:n,event:i,historyValue:e.historyValue,history:e.history,activities:e.activities,tree:e.tree})}return t.from(e,n)},Object.defineProperty(t.prototype,"inert",{get:function(){return t.inert(this,this.context)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextEvents",{get:function(){return this.tree?this.tree.nextEvents:[]},enumerable:!0,configurable:!0}),t.prototype.toStrings=function(t,e){var n=this;if(void 0===t&&(t=this.value),void 0===e&&(e="."),"string"==typeof t)return[t];var r=Object(o.d)(t);return r.concat.apply(r,s(r.map(function(r){return n.toStrings(t[r]).map(function(t){return r+e+t})})))},t.prototype.matches=function(t){return Object(o.h)(t,this.value)},t}()},function(t,e,n){"use strict";var r={};n.r(r),n.d(r,"create",function(){return a}),n.d(r,"clone",function(){return s}),n.d(r,"copy",function(){return u}),n.d(r,"fromValues",function(){return c}),n.d(r,"set",function(){return f}),n.d(r,"identity",function(){return l}),n.d(r,"transpose",function(){return d}),n.d(r,"invert",function(){return h}),n.d(r,"adjoint",function(){return p}),n.d(r,"determinant",function(){return v}),n.d(r,"multiply",function(){return g}),n.d(r,"translate",function(){return y}),n.d(r,"scale",function(){return m}),n.d(r,"rotate",function(){return b}),n.d(r,"rotateX",function(){return S}),n.d(r,"rotateY",function(){return w}),n.d(r,"rotateZ",function(){return O}),n.d(r,"fromTranslation",function(){return x}),n.d(r,"fromScaling",function(){return E}),n.d(r,"fromRotation",function(){return _}),n.d(r,"fromXRotation",function(){return T}),n.d(r,"fromYRotation",function(){return j}),n.d(r,"fromZRotation",function(){return A}),n.d(r,"fromRotationTranslation",function(){return M}),n.d(r,"fromQuat2",function(){return P}),n.d(r,"getTranslation",function(){return N}),n.d(r,"getScaling",function(){return R}),n.d(r,"getRotation",function(){return C}),n.d(r,"fromRotationTranslationScale",function(){return L}),n.d(r,"fromRotationTranslationScaleOrigin",function(){return I}),n.d(r,"fromQuat",function(){return D}),n.d(r,"frustum",function(){return k}),n.d(r,"perspective",function(){return U}),n.d(r,"perspectiveFromFieldOfView",function(){return F}),n.d(r,"ortho",function(){return W}),n.d(r,"lookAt",function(){return V}),n.d(r,"targetTo",function(){return G}),n.d(r,"str",function(){return B}),n.d(r,"frob",function(){return q}),n.d(r,"add",function(){return H}),n.d(r,"subtract",function(){return z}),n.d(r,"multiplyScalar",function(){return X}),n.d(r,"multiplyScalarAndAdd",function(){return K}),n.d(r,"exactEquals",function(){return Y}),n.d(r,"equals",function(){return $}),n.d(r,"mul",function(){return J}),n.d(r,"sub",function(){return Q});var i=1e-6,o="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function a(){var t=new o(16);return o!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function s(t){var e=new o(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function c(t,e,n,r,i,a,s,u,c,f,l,d,h,p,v,g){var y=new o(16);return y[0]=t,y[1]=e,y[2]=n,y[3]=r,y[4]=i,y[5]=a,y[6]=s,y[7]=u,y[8]=c,y[9]=f,y[10]=l,y[11]=d,y[12]=h,y[13]=p,y[14]=v,y[15]=g,y}function f(t,e,n,r,i,o,a,s,u,c,f,l,d,h,p,v,g){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t[9]=f,t[10]=l,t[11]=d,t[12]=h,t[13]=p,t[14]=v,t[15]=g,t}function l(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function d(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function h(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=e[9],d=e[10],h=e[11],p=e[12],v=e[13],g=e[14],y=e[15],m=n*s-r*a,b=n*u-i*a,S=n*c-o*a,w=r*u-i*s,O=r*c-o*s,x=i*c-o*u,E=f*v-l*p,_=f*g-d*p,T=f*y-h*p,j=l*g-d*v,A=l*y-h*v,M=d*y-h*g,P=m*M-b*A+S*j+w*T-O*_+x*E;return P?(P=1/P,t[0]=(s*M-u*A+c*j)*P,t[1]=(i*A-r*M-o*j)*P,t[2]=(v*x-g*O+y*w)*P,t[3]=(d*O-l*x-h*w)*P,t[4]=(u*T-a*M-c*_)*P,t[5]=(n*M-i*T+o*_)*P,t[6]=(g*S-p*x-y*b)*P,t[7]=(f*x-d*S+h*b)*P,t[8]=(a*A-s*T+c*E)*P,t[9]=(r*T-n*A-o*E)*P,t[10]=(p*O-v*S+y*m)*P,t[11]=(l*S-f*O-h*m)*P,t[12]=(s*_-a*j-u*E)*P,t[13]=(n*j-r*_+i*E)*P,t[14]=(v*b-p*w-g*m)*P,t[15]=(f*w-l*b+d*m)*P,t):null}function p(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=e[9],d=e[10],h=e[11],p=e[12],v=e[13],g=e[14],y=e[15];return t[0]=s*(d*y-h*g)-l*(u*y-c*g)+v*(u*h-c*d),t[1]=-(r*(d*y-h*g)-l*(i*y-o*g)+v*(i*h-o*d)),t[2]=r*(u*y-c*g)-s*(i*y-o*g)+v*(i*c-o*u),t[3]=-(r*(u*h-c*d)-s*(i*h-o*d)+l*(i*c-o*u)),t[4]=-(a*(d*y-h*g)-f*(u*y-c*g)+p*(u*h-c*d)),t[5]=n*(d*y-h*g)-f*(i*y-o*g)+p*(i*h-o*d),t[6]=-(n*(u*y-c*g)-a*(i*y-o*g)+p*(i*c-o*u)),t[7]=n*(u*h-c*d)-a*(i*h-o*d)+f*(i*c-o*u),t[8]=a*(l*y-h*v)-f*(s*y-c*v)+p*(s*h-c*l),t[9]=-(n*(l*y-h*v)-f*(r*y-o*v)+p*(r*h-o*l)),t[10]=n*(s*y-c*v)-a*(r*y-o*v)+p*(r*c-o*s),t[11]=-(n*(s*h-c*l)-a*(r*h-o*l)+f*(r*c-o*s)),t[12]=-(a*(l*g-d*v)-f*(s*g-u*v)+p*(s*d-u*l)),t[13]=n*(l*g-d*v)-f*(r*g-i*v)+p*(r*d-i*l),t[14]=-(n*(s*g-u*v)-a*(r*g-i*v)+p*(r*u-i*s)),t[15]=n*(s*d-u*l)-a*(r*d-i*l)+f*(r*u-i*s),t}function v(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],f=t[9],l=t[10],d=t[11],h=t[12],p=t[13],v=t[14],g=t[15];return(e*a-n*o)*(l*g-d*v)-(e*s-r*o)*(f*g-d*p)+(e*u-i*o)*(f*v-l*p)+(n*s-r*a)*(c*g-d*h)-(n*u-i*a)*(c*v-l*h)+(r*u-i*s)*(c*p-f*h)}function g(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],d=e[9],h=e[10],p=e[11],v=e[12],g=e[13],y=e[14],m=e[15],b=n[0],S=n[1],w=n[2],O=n[3];return t[0]=b*r+S*s+w*l+O*v,t[1]=b*i+S*u+w*d+O*g,t[2]=b*o+S*c+w*h+O*y,t[3]=b*a+S*f+w*p+O*m,b=n[4],S=n[5],w=n[6],O=n[7],t[4]=b*r+S*s+w*l+O*v,t[5]=b*i+S*u+w*d+O*g,t[6]=b*o+S*c+w*h+O*y,t[7]=b*a+S*f+w*p+O*m,b=n[8],S=n[9],w=n[10],O=n[11],t[8]=b*r+S*s+w*l+O*v,t[9]=b*i+S*u+w*d+O*g,t[10]=b*o+S*c+w*h+O*y,t[11]=b*a+S*f+w*p+O*m,b=n[12],S=n[13],w=n[14],O=n[15],t[12]=b*r+S*s+w*l+O*v,t[13]=b*i+S*u+w*d+O*g,t[14]=b*o+S*c+w*h+O*y,t[15]=b*a+S*f+w*p+O*m,t}function y(t,e,n){var r,i,o,a,s,u,c,f,l,d,h,p,v=n[0],g=n[1],y=n[2];return e===t?(t[12]=e[0]*v+e[4]*g+e[8]*y+e[12],t[13]=e[1]*v+e[5]*g+e[9]*y+e[13],t[14]=e[2]*v+e[6]*g+e[10]*y+e[14],t[15]=e[3]*v+e[7]*g+e[11]*y+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],d=e[9],h=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=f,t[8]=l,t[9]=d,t[10]=h,t[11]=p,t[12]=r*v+s*g+l*y+e[12],t[13]=i*v+u*g+d*y+e[13],t[14]=o*v+c*g+h*y+e[14],t[15]=a*v+f*g+p*y+e[15]),t}function m(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function b(t,e,n,r){var o,a,s,u,c,f,l,d,h,p,v,g,y,m,b,S,w,O,x,E,_,T,j,A,M=r[0],P=r[1],N=r[2],R=Math.sqrt(M*M+P*P+N*N);return R<i?null:(M*=R=1/R,P*=R,N*=R,o=Math.sin(n),s=1-(a=Math.cos(n)),u=e[0],c=e[1],f=e[2],l=e[3],d=e[4],h=e[5],p=e[6],v=e[7],g=e[8],y=e[9],m=e[10],b=e[11],S=M*M*s+a,w=P*M*s+N*o,O=N*M*s-P*o,x=M*P*s-N*o,E=P*P*s+a,_=N*P*s+M*o,T=M*N*s+P*o,j=P*N*s-M*o,A=N*N*s+a,t[0]=u*S+d*w+g*O,t[1]=c*S+h*w+y*O,t[2]=f*S+p*w+m*O,t[3]=l*S+v*w+b*O,t[4]=u*x+d*E+g*_,t[5]=c*x+h*E+y*_,t[6]=f*x+p*E+m*_,t[7]=l*x+v*E+b*_,t[8]=u*T+d*j+g*A,t[9]=c*T+h*j+y*A,t[10]=f*T+p*j+m*A,t[11]=l*T+v*j+b*A,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function S(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],f=e[9],l=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=a*i+f*r,t[6]=s*i+l*r,t[7]=u*i+d*r,t[8]=c*i-o*r,t[9]=f*i-a*r,t[10]=l*i-s*r,t[11]=d*i-u*r,t}function w(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[8],f=e[9],l=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*r,t[1]=a*i-f*r,t[2]=s*i-l*r,t[3]=u*i-d*r,t[8]=o*r+c*i,t[9]=a*r+f*i,t[10]=s*r+l*i,t[11]=u*r+d*i,t}function O(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],f=e[5],l=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=a*i+f*r,t[2]=s*i+l*r,t[3]=u*i+d*r,t[4]=c*i-o*r,t[5]=f*i-a*r,t[6]=l*i-s*r,t[7]=d*i-u*r,t}function x(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function E(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _(t,e,n){var r,o,a,s=n[0],u=n[1],c=n[2],f=Math.sqrt(s*s+u*u+c*c);return f<i?null:(s*=f=1/f,u*=f,c*=f,r=Math.sin(e),a=1-(o=Math.cos(e)),t[0]=s*s*a+o,t[1]=u*s*a+c*r,t[2]=c*s*a-u*r,t[3]=0,t[4]=s*u*a-c*r,t[5]=u*u*a+o,t[6]=c*u*a+s*r,t[7]=0,t[8]=s*c*a+u*r,t[9]=u*c*a-s*r,t[10]=c*c*a+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function T(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function j(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function A(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function M(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,u=i+i,c=o+o,f=r*s,l=r*u,d=r*c,h=i*u,p=i*c,v=o*c,g=a*s,y=a*u,m=a*c;return t[0]=1-(h+v),t[1]=l+m,t[2]=d-y,t[3]=0,t[4]=l-m,t[5]=1-(f+v),t[6]=p+g,t[7]=0,t[8]=d+y,t[9]=p-g,t[10]=1-(f+h),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function P(t,e){var n=new o(3),r=-e[0],i=-e[1],a=-e[2],s=e[3],u=e[4],c=e[5],f=e[6],l=e[7],d=r*r+i*i+a*a+s*s;return d>0?(n[0]=2*(u*s+l*r+c*a-f*i)/d,n[1]=2*(c*s+l*i+f*r-u*a)/d,n[2]=2*(f*s+l*a+u*i-c*r)/d):(n[0]=2*(u*s+l*r+c*a-f*i),n[1]=2*(c*s+l*i+f*r-u*a),n[2]=2*(f*s+l*a+u*i-c*r)),M(t,e,n),t}function N(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function R(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],s=e[6],u=e[8],c=e[9],f=e[10];return t[0]=Math.sqrt(n*n+r*r+i*i),t[1]=Math.sqrt(o*o+a*a+s*s),t[2]=Math.sqrt(u*u+c*c+f*f),t}function C(t,e){var n=e[0]+e[5]+e[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function L(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3],u=i+i,c=o+o,f=a+a,l=i*u,d=i*c,h=i*f,p=o*c,v=o*f,g=a*f,y=s*u,m=s*c,b=s*f,S=r[0],w=r[1],O=r[2];return t[0]=(1-(p+g))*S,t[1]=(d+b)*S,t[2]=(h-m)*S,t[3]=0,t[4]=(d-b)*w,t[5]=(1-(l+g))*w,t[6]=(v+y)*w,t[7]=0,t[8]=(h+m)*O,t[9]=(v-y)*O,t[10]=(1-(l+p))*O,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function I(t,e,n,r,i){var o=e[0],a=e[1],s=e[2],u=e[3],c=o+o,f=a+a,l=s+s,d=o*c,h=o*f,p=o*l,v=a*f,g=a*l,y=s*l,m=u*c,b=u*f,S=u*l,w=r[0],O=r[1],x=r[2],E=i[0],_=i[1],T=i[2],j=(1-(v+y))*w,A=(h+S)*w,M=(p-b)*w,P=(h-S)*O,N=(1-(d+y))*O,R=(g+m)*O,C=(p+b)*x,L=(g-m)*x,I=(1-(d+v))*x;return t[0]=j,t[1]=A,t[2]=M,t[3]=0,t[4]=P,t[5]=N,t[6]=R,t[7]=0,t[8]=C,t[9]=L,t[10]=I,t[11]=0,t[12]=n[0]+E-(j*E+P*_+C*T),t[13]=n[1]+_-(A*E+N*_+L*T),t[14]=n[2]+T-(M*E+R*_+I*T),t[15]=1,t}function D(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,f=r*a,l=r*s,d=i*a,h=i*s,p=i*u,v=o*a,g=o*s,y=o*u;return t[0]=1-l-p,t[1]=f+y,t[2]=d-g,t[3]=0,t[4]=f-y,t[5]=1-c-p,t[6]=h+v,t[7]=0,t[8]=d+g,t[9]=h-v,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function k(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t}function U(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}function F(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(i-o)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function W(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t}function V(t,e,n,r){var o,a,s,u,c,f,d,h,p,v,g=e[0],y=e[1],m=e[2],b=r[0],S=r[1],w=r[2],O=n[0],x=n[1],E=n[2];return Math.abs(g-O)<i&&Math.abs(y-x)<i&&Math.abs(m-E)<i?l(t):(d=g-O,h=y-x,p=m-E,o=S*(p*=v=1/Math.sqrt(d*d+h*h+p*p))-w*(h*=v),a=w*(d*=v)-b*p,s=b*h-S*d,(v=Math.sqrt(o*o+a*a+s*s))?(o*=v=1/v,a*=v,s*=v):(o=0,a=0,s=0),u=h*s-p*a,c=p*o-d*s,f=d*a-h*o,(v=Math.sqrt(u*u+c*c+f*f))?(u*=v=1/v,c*=v,f*=v):(u=0,c=0,f=0),t[0]=o,t[1]=u,t[2]=d,t[3]=0,t[4]=a,t[5]=c,t[6]=h,t[7]=0,t[8]=s,t[9]=f,t[10]=p,t[11]=0,t[12]=-(o*g+a*y+s*m),t[13]=-(u*g+c*y+f*m),t[14]=-(d*g+h*y+p*m),t[15]=1,t)}function G(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=r[0],u=r[1],c=r[2],f=i-n[0],l=o-n[1],d=a-n[2],h=f*f+l*l+d*d;h>0&&(f*=h=1/Math.sqrt(h),l*=h,d*=h);var p=u*d-c*l,v=c*f-s*d,g=s*l-u*f;return(h=p*p+v*v+g*g)>0&&(p*=h=1/Math.sqrt(h),v*=h,g*=h),t[0]=p,t[1]=v,t[2]=g,t[3]=0,t[4]=l*g-d*v,t[5]=d*p-f*g,t[6]=f*v-l*p,t[7]=0,t[8]=f,t[9]=l,t[10]=d,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t}function B(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function q(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function H(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function z(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function X(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function K(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function Y(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function $(t,e){var n=t[0],r=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],f=t[7],l=t[8],d=t[9],h=t[10],p=t[11],v=t[12],g=t[13],y=t[14],m=t[15],b=e[0],S=e[1],w=e[2],O=e[3],x=e[4],E=e[5],_=e[6],T=e[7],j=e[8],A=e[9],M=e[10],P=e[11],N=e[12],R=e[13],C=e[14],L=e[15];return Math.abs(n-b)<=i*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(r-S)<=i*Math.max(1,Math.abs(r),Math.abs(S))&&Math.abs(o-w)<=i*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-O)<=i*Math.max(1,Math.abs(a),Math.abs(O))&&Math.abs(s-x)<=i*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(u-E)<=i*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(c-_)<=i*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(f-T)<=i*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(l-j)<=i*Math.max(1,Math.abs(l),Math.abs(j))&&Math.abs(d-A)<=i*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(h-M)<=i*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(p-P)<=i*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(v-N)<=i*Math.max(1,Math.abs(v),Math.abs(N))&&Math.abs(g-R)<=i*Math.max(1,Math.abs(g),Math.abs(R))&&Math.abs(y-C)<=i*Math.max(1,Math.abs(y),Math.abs(C))&&Math.abs(m-L)<=i*Math.max(1,Math.abs(m),Math.abs(L))}var J=g,Q=z;n.d(e,"a",function(){return r})},function(t,e,n){"use strict";var r=n(11);n.d(e,"createCollection",function(){return r.a}),n.d(e,"createCollectionItem",function(){return r.b});var i=n(14);n.o(i,"getSymbolString")&&n.d(e,"getSymbolString",function(){return i.getSymbolString});var o=n(15);n.d(e,"getSymbolString",function(){return o.a})},function(t,e,n){"use strict";var r=n(0),i=n(3),o=n(5),a=n(4),s=n(1),u=function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},c=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},f=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t},l={resolved:!1},d=function(){function t(e,n,i){var o;void 0===i&&(i=l),this.stateNode=e,this.stateValue=n,this.nodes=n?"string"==typeof n?((o={})[n]=new t(e.getStateNode(n),void 0),o):Object(r.g)(n,function(n,r){return new t(e.getStateNode(r),n)}):{};var a=u({},l,i);this.isResolved=a.resolved}return Object.defineProperty(t.prototype,"done",{get:function(){var t=this;switch(this.stateNode.type){case"final":return!0;case"compound":return"final"===this.nodes[Object(r.d)(this.nodes)[0]].stateNode.type;case"parallel":return Object(r.d)(this.nodes).every(function(e){return t.nodes[e].done});default:return!1}},enumerable:!0,configurable:!0}),t.prototype.getDoneData=function(t,e){if(this.done&&"compound"===this.stateNode.type){var n=this.nodes[Object(r.d)(this.nodes)[0]];if(!n.stateNode.data)return;return Object(r.e)(n.stateNode.data,t,e)}},Object.defineProperty(t.prototype,"atomicNodes",{get:function(){var t=this;return"atomic"===this.stateNode.type||"final"===this.stateNode.type?[this.stateNode]:Object(r.a)(Object(r.d)(this.value).map(function(e){return t.value[e].atomicNodes}))},enumerable:!0,configurable:!0}),t.prototype.getDoneEvents=function(t){var e=this;if(!t||!t.size)return[];if(t.has(this.stateNode)&&"final"===this.stateNode.type)return[Object(s.d)(this.stateNode.id,this.stateNode.data)];var n=Object(r.a)(Object(r.d)(this.nodes).map(function(n){return e.nodes[n].getDoneEvents(t)}));if("parallel"===this.stateNode.type){var i=Object(r.d)(this.nodes).every(function(t){return e.nodes[t].done});return n&&i?n.concat(Object(s.d)(this.stateNode.id)):n}if(!this.done||!n.length)return n;var o=1===n.length?n[0].data:void 0;return n.concat(Object(s.d)(this.stateNode.id,o))},Object.defineProperty(t.prototype,"resolved",{get:function(){return new t(this.stateNode,this.stateNode.resolve(this.value),{resolved:!0})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paths",{get:function(){return Object(r.o)(this.value)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"absolute",{get:function(){var e=this,n=this.stateValue,r={},i=r;return this.stateNode.path.forEach(function(t,r){r===e.stateNode.path.length-1?i[t]=n:(i[t]={},i=i[t])}),new t(this.stateNode.machine,r)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextEvents",{get:function(){var t=this,e=this.stateNode.ownEvents,n=Object(r.a)(Object(r.d)(this.nodes).map(function(e){return t.nodes[e].nextEvents}));return f(new Set(n.concat(e)))},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.stateNode,this.value)},t.prototype.combine=function(t){var e,n=this;if(t.stateNode!==this.stateNode)throw new Error("Cannot combine distinct trees");if("compound"===this.stateNode.type){var i=void 0;if(Object(r.d)(this.nodes).length&&Object(r.d)(t.nodes).length){var o=Object(r.d)(this.nodes)[0];return(e={})[o]=this.nodes[o].combine(t.nodes[o]),i=e,(a=this.clone()).nodes=i,a}return i=Object.assign({},this.nodes,t.nodes),(a=this.clone()).nodes=i,a}if("parallel"===this.stateNode.type){var a,s=new Set(f(Object(r.d)(this.nodes),Object(r.d)(t.nodes))),u={};return s.forEach(function(e){n.nodes[e]&&t.nodes[e]?u[e]=n.nodes[e].combine(t.nodes[e]):u[e]=n.nodes[e]||t.nodes[e]}),(a=this.clone()).nodes=u,a}return this},Object.defineProperty(t.prototype,"value",{get:function(){if("atomic"===this.stateNode.type||"final"===this.stateNode.type)return{};if("parallel"===this.stateNode.type)return Object(r.g)(this.nodes,function(t){return t.value});if("compound"===this.stateNode.type){if(0===Object(r.d)(this.nodes).length)return{};var t=this.nodes[Object(r.d)(this.nodes)[0]].stateNode;return"atomic"===t.type||"final"===t.type?t.key:Object(r.g)(this.nodes,function(t){return t.value})}return{}},enumerable:!0,configurable:!0}),t.prototype.matches=function(t){return Object(r.h)(t,this.value)},t.prototype.getEntryExitStates=function(t,e){var n=this;if(t.stateNode!==this.stateNode)throw new Error("Cannot compare distinct trees");switch(this.stateNode.type){case"compound":var i={exit:[],entry:[]},o=Object(r.d)(this.nodes)[0],a=Object(r.d)(t.nodes)[0];return o!==a?(i.exit=t.nodes[a].getExitStates(),i.entry=this.nodes[o].getEntryStates()):i=this.nodes[o].getEntryExitStates(t.nodes[a],e),e&&e.has(this.stateNode)&&(i.exit.push(this.stateNode),i.entry.unshift(this.stateNode)),i;case"parallel":var s=Object(r.d)(this.nodes).map(function(r){return n.nodes[r].getEntryExitStates(t.nodes[r],e)}),u={exit:[],entry:[]};return s.forEach(function(t){u.exit=f(u.exit,t.exit),u.entry=f(u.entry,t.entry)}),e&&e.has(this.stateNode)&&(u.exit.push(this.stateNode),u.entry.unshift(this.stateNode)),u;case"atomic":default:return e&&e.has(this.stateNode)?{exit:[this.stateNode],entry:[this.stateNode]}:{exit:[],entry:[]}}},t.prototype.getEntryStates=function(){var t=this;return this.nodes?[this.stateNode].concat(Object(r.a)(Object(r.d)(this.nodes).map(function(e){return t.nodes[e].getEntryStates()}))):[this.stateNode]},t.prototype.getExitStates=function(){var t=this;return this.nodes?Object(r.a)(Object(r.d)(this.nodes).map(function(e){return t.nodes[e].getExitStates()})).concat(this.stateNode):[this.stateNode]},t}();n.d(e,"a",function(){return x}),n.d(e,"b",function(){return E});var h=function(){return(h=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},p=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n},v=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},g=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(v(arguments[e]));return t},y=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},m=".",b="",S={},w=function(t){return"#"===t[0]},O=function(){return{actions:{},guards:{},services:{},activities:{},delays:{},updater:r.q}},x=!0,E=function(){function t(e,n,i){var o=this;this._config=e,this.context=i,this.__cache={events:void 0,relativeValue:new Map,initialState:void 0},this.idMap={},this.options=h({},O(),n),this.key=e.key||e.id||"(machine)",this.parent=e.parent,this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=e.delimiter||(this.parent?this.parent.delimiter:m),this.id=e.id||(this.machine?g([this.machine.key],this.path).join(this.delimiter):this.key),this.version=this.parent?this.parent.version:e.version,this.type=e.type||(e.parallel?"parallel":e.states&&Object(r.d)(e.states).length?"compound":e.history?"history":"atomic"),!x&&"parallel"in e&&console.warn('The "parallel" property is deprecated and will be removed in version 4.1. '+(e.parallel?"Replace with `type: 'parallel'`":"Use `type: '"+this.type+"'`")+" in the config for state node '"+this.id+"' instead."),this.initial=e.initial,this.order=e.order||-1,this.states=e.states?Object(r.g)(e.states,function(e,n,r,i){var a,s=new t(h({},e,{key:n,order:void 0===e.order?i:e.order,parent:o}));return Object.assign(o.idMap,h(((a={})[s.id]=s,a),s.idMap)),s}):S,this.history=!0===e.history?"shallow":e.history||!1,this.transient=!(!e.on||!e.on[b]),this.strict=!!e.strict,this.onEntry=Object(r.m)(e.onEntry).map(function(t){return Object(s.o)(t)}),this.onExit=Object(r.m)(e.onExit).map(function(t){return Object(s.o)(t)}),this.meta=e.meta,this.data="final"===this.type?e.data:void 0,this.invoke=Object(r.m)(e.invoke).map(function(e,n){var r,i;if(e instanceof t)return(o.parent||o).options.services=h(((r={})[e.id]=e,r),(o.parent||o).options.services),{type:a.e,src:e.id,id:e.id};if("string"!=typeof e.src){var s=o.id+":invocation["+n+"]";return o.machine.options.services=h(((i={})[s]=e.src,i),o.machine.options.services),h({type:a.e,id:s},e,{src:s})}return h({},e,{type:a.e,id:e.id||e.src,src:e.src})}),this.activities=Object(r.m)(e.activities).concat(this.invoke).map(function(t){return o.resolveActivity(t)}),this.after=this.getDelayedTransitions()}return t.prototype.withConfig=function(e,n){void 0===n&&(n=this.context);var r=this.options,i=r.actions,o=r.activities,a=r.guards,s=r.services,u=r.delays;return new t(this.definition,{actions:h({},i,e.actions),activities:h({},o,e.activities),guards:h({},a,e.guards),services:h({},s,e.services),delays:h({},u,e.delays)},n)},t.prototype.withContext=function(e){return new t(this.definition,this.options,e)},Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,type:this.type,initial:this.initial,history:this.history,states:Object(r.g)(this.states,function(t){return t.definition}),on:this.on,onEntry:this.onEntry,onExit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.data}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){var t=this._config;t.parent;return p(t,["parent"])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"on",{get:function(){return this.formatTransitions()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){var t=this;return Object(r.a)(Object(r.d)(this.on).map(function(e){return t.on[e]}))},enumerable:!0,configurable:!0}),t.prototype.getDelayedTransitions=function(){var t=this;if(this.after)return this.after;var e=this.config.after;if(!e)return[];if(Array.isArray(e))return e.map(function(e,n){var i,o=e.delay;"function"==typeof o?(i=t.id+":delay["+n+"]",t.options.delays[i]=o):i=o;var a=Object(s.a)(i,t.id);return t.onEntry.push(Object(s.k)(a,{delay:o})),t.onExit.push(Object(s.c)(a)),h({event:a},e,{cond:e.cond?t.toGuard(e.cond):void 0,actions:Object(r.m)(e.actions).map(function(t){return Object(s.o)(t)})})});var n=Object(r.a)(Object(r.d)(e).map(function(n){var i=e[n],o=isNaN(+n)?n:+n,a=Object(s.a)(o,t.id);return t.onEntry.push(Object(s.k)(a,{delay:o})),t.onExit.push(Object(s.c)(a)),"string"==typeof i?[{target:i,delay:o,event:a,actions:[]}]:Object(r.m)(i).map(function(e){return h({event:a,delay:o},e,{cond:e.cond?t.toGuard(e.cond):void 0,actions:Object(r.m)(e.actions).map(function(t){return Object(s.o)(t)})})})}));return n.sort(function(t,e){return"string"==typeof t||"string"==typeof e?0:+t.delay-+e.delay}),n},t.prototype.getStateNodes=function(t){var e,n=this;if(!t)return[];var i=t instanceof o.a?t.value:Object(r.p)(t,this.delimiter);if("string"==typeof i){var a=this.getStateNode(i).initial;return void 0!==a?this.getStateNodes(((e={})[i]=a,e)):[this.states[i]]}var s=Object(r.d)(i);return s.map(function(t){return n.getStateNode(t)}).concat(s.reduce(function(t,e){var r=n.getStateNode(e).getStateNodes(i[e]);return t.concat(r)},[]))},t.prototype.handles=function(t){var e=Object(r.b)(t);return-1!==this.events.indexOf(e)},t.prototype.resolveState=function(t){var e=this.getStateTree(t.value),n=this.resolve(t.value);return new o.a({value:n,context:t.context,event:t.event,historyValue:t.historyValue,history:t.history,actions:t.actions,activities:t.activities,meta:t.meta,events:t.events,tree:e})},t.prototype.transitionLeafNode=function(t,e,n){var r=this.getStateNode(t).next(e,n);if(!r.tree){var i=this.next(e,n),o=i.reentryStates,a=i.actions;return{tree:i.tree,source:e,reentryStates:o,actions:a}}return r},t.prototype.transitionCompoundNode=function(t,e,n){var i=Object(r.d)(t),o=this.getStateNode(i[0])._transition(t[i[0]],e,n);if(!o.tree){var a=this.next(e,n),s=a.reentryStates,u=a.actions;return{tree:a.tree,source:e,reentryStates:s,actions:u}}return o},t.prototype.transitionParallelNode=function(t,e,n){var i=this,o=[],a={};if(Object(r.d)(t).forEach(function(r){var s=t[r];if(s){var u=i.getStateNode(r)._transition(s,e,n);u.tree||o.push(r),a[r]=u}}),!Object(r.d)(a).some(function(t){return void 0!==a[t].tree})){var s=this.next(e,n),u=s.reentryStates,c=s.actions;return{tree:s.tree,source:e,reentryStates:u,actions:c}}var f=Object(r.d)(a).map(function(t){return a[t].tree}).filter(function(t){return void 0!==t}).reduce(function(t,e){return t.combine(e)});return 1!==f.paths.length||Object(r.h)(Object(r.p)(this.path,this.delimiter),f.value)?{tree:Object(r.d)(a).map(function(t){var n=a[t],o=Object(r.k)(i.path)(n.tree?n.tree.value:e.value||e.value)[t];return new d(i.getStateNode(t),o).absolute}).reduce(function(t,e){return t.combine(e)}),source:e,reentryStates:Object(r.d)(a).reduce(function(t,e){var n=a[e],r=n.tree,i=n.reentryStates;return r&&i?new Set(g(Array.from(t),Array.from(i))):t},new Set),actions:Object(r.a)(Object(r.d)(a).map(function(t){return a[t].actions}))}:{tree:f,source:e,reentryStates:Object(r.d)(a).map(function(t){return a[t].reentryStates}).reduce(function(t,e){var n,r;if(!e)return t;try{for(var i=y(e),o=i.next();!o.done;o=i.next()){var a=o.value;t.add(a)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return t},new Set),actions:Object(r.a)(Object(r.d)(a).map(function(t){return a[t].actions}))}},t.prototype._transition=function(t,e,n){return"string"==typeof t?this.transitionLeafNode(t,e,n):1===Object(r.d)(t).length?this.transitionCompoundNode(t,e,n):this.transitionParallelNode(t,e,n)},t.prototype.next=function(t,e){var n,i,o=this,s=e.type,u=this.on[s],c=this.transient?[{type:a.g}]:[];if(!u||!u.length)return{tree:void 0,source:t,reentryStates:void 0,actions:c};var f,l=[];try{for(var d=y(u),h=d.next();!h.done;h=d.next()){var p=h.value,v=p.cond,m=p.in,b=t.context,S=!m||("string"==typeof m&&w(m)?t.matches(Object(r.p)(this.getStateNodeById(m).path,this.delimiter)):Object(r.h)(Object(r.p)(m,this.delimiter),Object(r.k)(this.path.slice(0,-2))(t.value)));if((!v||this.evaluateGuard(v,b,e,t))&&S){l=Object(r.m)(p.target),c.push.apply(c,g(Object(r.m)(p.actions))),f=p;break}}}catch(t){n={error:t}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}if(f&&0===l.length)return{tree:t.value?this.machine.getStateTree(t.value):void 0,source:t,reentryStates:void 0,actions:c};if(!f&&0===l.length)return{tree:void 0,source:t,reentryStates:void 0,actions:c};var O=Object(r.a)(l.map(function(e){return o.getRelativeStateNodes(e,t.historyValue)})),x=!!f.internal?[]:Object(r.a)(O.map(function(t){return o.nodesFromChild(t)}));return{tree:O.map(function(t){return t.tree}).reduce(function(t,e){return t.combine(e)}),source:t,reentryStates:new Set(x),actions:c}},Object.defineProperty(t.prototype,"tree",{get:function(){var t=Object(r.p)(this.path,this.delimiter);return new d(this.machine,t)},enumerable:!0,configurable:!0}),t.prototype.nodesFromChild=function(t){if(t.escapes(this))return[];for(var e=[],n=t;n&&n!==this;)e.push(n),n=n.parent;return e.push(this),e},t.prototype.getStateTree=function(t){return new d(this,t)},t.prototype.escapes=function(t){if(this===t)return!1;for(var e=this.parent;e;){if(e===t)return!1;e=e.parent}return!0},t.prototype.evaluateGuard=function(t,e,n,r){var i=this.machine.options.guards,o={state:r,cond:t};if("xstate.cond"===t.type)return t.predicate(e,n,o);if(!i[t.type])throw new Error("Guard (condition) '"+t.type+"' is not implemented on machine '"+this.machine.id+"'.");return(0,i[t.type])(e,n,o)},t.prototype.toGuard=function(t){return"string"==typeof t?{type:t}:"function"==typeof t?{type:"xstate.cond",predicate:t}:t},t.prototype.getActions=function(t,e){var n=this,i=t.tree?t.tree.resolved.getEntryExitStates(this.getStateTree(e.value),t.reentryStates?t.reentryStates:void 0):{entry:[],exit:[]},o=t.tree?t.tree.getDoneEvents(new Set(i.entry)):[];t.source||(i.exit=[],i.entry.unshift(this));var a=new Set(i.entry),u=new Set(i.exit),c=v([Object(r.a)(Array.from(a).map(function(t){return g(t.activities.map(function(t){return Object(s.m)(t)}),t.onEntry)})).concat(o.map(s.i)),Object(r.a)(Array.from(u).map(function(t){return g(t.onExit,t.activities.map(function(t){return Object(s.n)(t)}))}))],2),f=c[0];return c[1].concat(t.actions).concat(f).map(function(t){return n.resolveAction(t)})},t.prototype.resolveAction=function(t){return Object(s.o)(t,this.machine.options.actions)},t.prototype.resolveActivity=function(t){return Object(s.p)(t)},t.prototype.transition=function(t,e,n){var i;if(t instanceof o.a)i=void 0===n?t:this.resolveState(o.a.from(t,n));else{var a="string"==typeof t?this.resolve(Object(r.l)(this.getResolvedPath(t))):this.resolve(t),u=n||this.machine.context;i=this.resolveState(o.a.from(a,u))}var c=Object(s.q)(e),f=c.type;if(this.strict&&-1===this.events.indexOf(f)&&!Object(r.c)(f))throw new Error("Machine '"+this.id+"' does not accept event '"+f+"'");var l=this._transition(i.value,i,c),d=h({},l,{tree:l.tree?l.tree.resolved:void 0});return this.resolveTransition(d,i,c)},t.prototype.resolveTransition=function(t,e,n){var u,c=this,f=t.tree?t.tree.value:void 0,l=e.historyValue?e.historyValue:t.source?this.machine.historyValue(e.value):void 0;if(!x&&t.tree)try{this.ensureValidPaths(t.tree.paths)}catch(t){throw new Error("Event '"+(n?n.type:"none")+"' leads to an invalid configuration: "+t.message)}var d=this.getActions(t,e),p=h({},e.activities);d.forEach(function(t){t.type===a.j?p[t.activity.type]=!0:t.type===a.k&&(p[t.activity.type]=!1)});var y=v(Object(r.j)(d,function(t){return t.type===a.h||t.type===a.g}),2),m=y[0],S=y[1],w=v(Object(r.j)(S,function(t){return t.type===a.a}),2),O=w[0],E=w[1],_=O.length?this.options.updater(e.context,n,O):e.context,T=E.map(function(t){var e=Object(s.o)(t);if(e.type===a.i){var r=Object(s.j)(e,_,n||{type:i.a.Init});if("string"==typeof r.delay){if(!c.machine.options.delays||void 0===c.machine.options.delays[r.delay])return console.warn("No delay reference for delay expression '"+r.delay+"' was found on machine '"+c.machine.id+"'"),r;var o=c.machine.options.delays[r.delay];r.delay="number"==typeof o?o:o(_,n||{type:i.a.Init})}return r}return Object(s.o)(e,c.options.actions)}),j=f?this.getStateNodes(f):[];j.some(function(t){return t.transient})&&m.push({type:a.g});var A=g([this],j).reduce(function(t,e){return void 0!==e.meta&&(t[e.id]=e.meta),t},{}),M=f?new o.a({value:f,context:_,event:n||s.g,historyValue:l?Object(r.r)(l,f):void 0,history:t.source?e:void 0,actions:T,activities:p,meta:A,events:m,tree:t.tree}):void 0;if(!M)return(M=new o.a({value:e.value,context:_,event:n,historyValue:e.historyValue,history:e,actions:[],activities:e.activities,meta:e.meta,events:[],tree:e.tree})).changed=!!O.length,M;var P=M.history;P&&delete P.history;for(var N=M;m.length;){var R=N.actions,C=m.shift();(N=this.transition(N,C.type===a.g?b:C.event,N.context)).event=n,(u=N.actions).unshift.apply(u,g(R))}var L=P?!!N.actions.length||!!O.length||typeof P.value!=typeof N.value||!Object(o.b)(N.value,P.value):void 0;return N.changed=L,N.historyValue=M.historyValue,N.history=P,N},t.prototype.ensureValidPaths=function(t){var e,n,i=this,o=new Map,a=Object(r.a)(t.map(function(t){return i.getRelativeStateNodes(t)}));try{t:for(var s=y(a),u=s.next();!u.done;u=s.next())for(var c=u.value,f=c;f.parent;){if(o.has(f.parent)){if("parallel"===f.parent.type)continue t;throw new Error("State node '"+c.id+"' shares parent '"+f.parent.id+"' with state node '"+o.get(f.parent).map(function(t){return t.id})+"'")}o.get(f.parent)?o.get(f.parent).push(c):o.set(f.parent,[c]),f=f.parent}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}},t.prototype.getStateNode=function(t){if(w(t))return this.machine.getStateNodeById(t);if(!this.states)throw new Error("Unable to retrieve child state '"+t+"' from '"+this.id+"'; no child states exist.");var e=this.states[t];if(!e)throw new Error("Child state '"+t+"' does not exist on '"+this.id+"'");return e},t.prototype.getStateNodeById=function(t){var e=w(t)?t.slice("#".length):t;if(e===this.id)return this;var n=this.machine.idMap[e];if(!n)throw new Error("Substate '#"+e+"' does not exist on '"+this.id+"'");return n},t.prototype.getStateNodeByPath=function(t){for(var e=Object(r.n)(t,this.delimiter).slice(),n=this;e.length;){var i=e.shift();n=n.getStateNode(i)}return n},t.prototype.resolve=function(t){var e,n=this;if(!t)return this.initialStateValue||S;switch(this.type){case"parallel":return Object(r.g)(this.initialStateValue,function(e,r){return e?n.getStateNode(r).resolve(t[r]||e):S});case"compound":if("string"==typeof t){var i=this.getStateNode(t);return"parallel"===i.type||"compound"===i.type?((e={})[t]=i.initialStateValue,e):t}return Object(r.d)(t).length?Object(r.g)(t,function(t,e){return t?n.getStateNode(e).resolve(t):S}):this.initialStateValue||{};default:return t||S}},Object.defineProperty(t.prototype,"resolvedStateValue",{get:function(){var t,e,n=this.key;if("parallel"===this.type)return(t={})[n]=Object(r.f)(this.states,function(t){return t.resolvedStateValue[t.key]},function(t){return!("history"===t.type)}),t;if(void 0===this.initial)return n;if(!this.states[this.initial])throw new Error("Initial state '"+this.initial+"' not found on '"+n+"'");return(e={})[n]=this.states[this.initial].resolvedStateValue,e},enumerable:!0,configurable:!0}),t.prototype.getResolvedPath=function(t){if(w(t)){var e=this.machine.idMap[t.slice("#".length)];if(!e)throw new Error("Unable to find state node '"+t+"'");return e.path}return Object(r.n)(t,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){if(this.__cache.initialState)return this.__cache.initialState;var t="parallel"===this.type?Object(r.f)(this.states,function(t){return t.initialStateValue||S},function(t){return!("history"===t.type)}):"string"==typeof this.resolvedStateValue?void 0:this.resolvedStateValue[this.key];return this.__cache.initialState=t,this.__cache.initialState},enumerable:!0,configurable:!0}),t.prototype.getInitialState=function(t,e){void 0===e&&(e=this.machine.context);var n={},u=[];this.getStateNodes(t).forEach(function(t){t.onEntry&&u.push.apply(u,g(t.onEntry)),t.activities&&t.activities.forEach(function(t){n[Object(r.b)(t)]=!0,u.push(Object(s.m)(t))})});var c=u.filter(function(t){return"object"==typeof t&&t.type===a.a}),f=this.options.updater(e,{type:i.a.Init},c);return new o.a({value:t,context:f,event:s.g,activities:n})},Object.defineProperty(t.prototype,"initialState",{get:function(){var t=this.initialStateValue;if(!t)throw new Error("Cannot retrieve initial state from simple state '"+this.id+"'.");var e=this.getInitialState(t);return this.resolveTransition({tree:this.getStateTree(t),source:void 0,reentryStates:new Set(this.getStateNodes(t)),actions:[]},e,{type:i.a.Init})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var t;if("history"===this.type){var e=this.config;t=e.target&&"string"==typeof e.target&&w(e.target)?Object(r.l)(this.machine.getStateNodeById(e.target).path.slice(this.path.length-1)):e.target}return t},enumerable:!0,configurable:!0}),t.prototype.getStates=function(t){var e=this;if("string"==typeof t)return[this.states[t]];var n=[];return Object(r.d)(t).forEach(function(r){n.push.apply(n,g(e.states[r].getStates(t[r])))}),n},t.prototype.getRelativeStateNodes=function(t,e,n){if(void 0===n&&(n=!0),"string"==typeof t&&w(t)){var i=this.getStateNodeById(t);return n?"history"===i.type?i.resolveHistory(e):i.initialStateNodes:[i]}var o=Object(r.n)(t,this.delimiter),a=(this.parent||this).getFromRelativePath(o,e);return n?Object(r.a)(a.map(function(t){return t.initialStateNodes})):a},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var t=this;if("atomic"===this.type||"final"===this.type)return[this];if("compound"===this.type&&!this.initial)return x||console.warn("Compound state node '"+this.id+"' has no initial state."),[this];var e=Object(r.o)(this.initialStateValue);return Object(r.a)(e.map(function(e){return t.getFromRelativePath(e)}))},enumerable:!0,configurable:!0}),t.prototype.getFromRelativePath=function(t,e){if(!t.length)return[this];var n=v(t),r=n[0],i=n.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '"+r+"' from node with no states");var o=this.getStateNode(r);if("history"===o.type)return o.resolveHistory(e);if(!this.states[r])throw new Error("Child state '"+r+"' does not exist on '"+this.id+"'");return this.states[r].getFromRelativePath(i,e)},t.prototype.historyValue=function(t){if(Object(r.d)(this.states).length)return{current:t||this.initialStateValue,states:Object(r.f)(this.states,function(e,n){if(!t)return e.historyValue();var r="string"==typeof t?void 0:t[n];return e.historyValue(r||e.initialStateValue)},function(t){return!t.history})}},t.prototype.resolveHistory=function(t){var e=this;if("history"!==this.type)return[this];var n=this.parent;if(!t)return this.target?Object(r.a)(Object(r.o)(this.target).map(function(t){return n.getFromRelativePath(t)})):n.initialStateNodes;var i=Object(r.i)(n.path,"states")(t).current;return"string"==typeof i?[n.getStateNode(i)]:Object(r.a)(Object(r.o)(i).map(function(t){return"deep"===e.history?n.getFromRelativePath(t):[n.states[t[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var t=this,e=Object(r.a)(Object(r.d)(this.states).map(function(e){return t.states[e].stateIds}));return[this.id].concat(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){if(this.__cache.events)return this.__cache.events;var t=this.states,e=new Set(this.ownEvents);return t&&Object(r.d)(t).forEach(function(n){var r,i,o=t[n];if(o.states)try{for(var a=y(o.events),s=a.next();!s.done;s=a.next()){var u=s.value;e.add(""+u)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}}),this.__cache.events=Array.from(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var t=this,e=new Set(Object(r.d)(this.on).filter(function(e){return t.on[e].some(function(t){return!(!t.target&&!t.actions.length&&t.internal)})}));return Array.from(e)},enumerable:!0,configurable:!0}),t.prototype.formatTransition=function(e,n,i){var o=this,a=n?n.internal:void 0;if(void 0===e||""===e)return h({},n,{actions:n?Object(r.m)(n.actions).map(function(t){return Object(s.o)(t)}):[],cond:n&&n.cond?this.toGuard(n.cond):void 0,target:void 0,internal:void 0===a||a,event:i});var u=Object(r.m)(e).map(function(e){if(e instanceof t)return"#"+e.id;var n="string"==typeof e&&e[0]===o.delimiter;return a=void 0===a?n:a,n&&!o.parent?e.slice(1):n?o.key+e:""+e});return h({},n,{actions:n?Object(r.m)(n.actions).map(function(t){return Object(s.o)(t)}):[],cond:n&&n.cond?this.toGuard(n.cond):void 0,target:u,internal:a,event:i})},t.prototype.formatTransitions=function(){var e,n=this,i=this.config.on||S,o=this.config.onDone?((e={})[""+Object(s.d)(this.id)]=this.config.onDone,e):void 0,u=this.invoke.reduce(function(t,e){return e.onDone&&(t[Object(s.e)(e.id)]=e.onDone),e.onError&&(t[a.c]=e.onError),t},{}),c=this.after,f=Object(r.g)(h({},i,o,u),function(e,i){return void 0===e?[{target:void 0,event:i,actions:[],internal:!0}]:Array.isArray(e)?e.map(function(t){return n.formatTransition(t.target,t,i)}):"string"==typeof e||e instanceof t?[n.formatTransition([e],void 0,i)]:(x||Object(r.d)(e).forEach(function(t){if(-1===["target","actions","internal","in","cond","event"].indexOf(t))throw new Error("State object mapping of transitions is deprecated. Check the config for event '"+i+"' on state '"+n.id+"'.")}),[n.formatTransition(e.target,e,i)])});return c.forEach(function(t){f[t.event]=f[t.event]||[],f[t.event].push(t)}),f},t}()},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i});var r=".",i={}},function(t,e,n){"use strict";function r(t,n,i){return function(o){var a=e.concat(i,[o]);return 0===n?t.apply(this,a):r(t,n-1,a)}}Object.defineProperty(e,"__esModule",{value:!0}),e.identity=function(t){return t},e.unsafeCoerce=e.identity,e.not=function(t){return function(e){return!t(e)}},e.or=function(t,e){return function(n){return t(n)||e(n)}},e.and=function(t,e){return function(n){return t(n)&&e(n)}},e.constant=function(t){return function(){return t}},e.constTrue=function(){return!0},e.constFalse=function(){return!1},e.constNull=function(){return null},e.constUndefined=function(){},e.constVoid=function(){},e.flip=function(t){return function(e){return function(n){return t(n)(e)}}},e.on=function(t){return function(e){return function(n,r){return t(e(n),e(r))}}},e.compose=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.length-1;return function(e){for(var r=e,i=n;i>-1;i--)r=t[i].call(this,r);return r}},e.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.length-1;return function(e){for(var r=e,i=0;i<=n;i++)r=t[i].call(this,r);return r}},e.concat=function(t,e){for(var n=t.length,r=e.length,i=Array(n+r),o=0;o<n;o++)i[o]=t[o];for(o=0;o<r;o++)i[o+n]=e[o];return i},e.curried=r,e.curry=function(t){return r(t,t.length-1,[])};e.toString=function(t){if("string"==typeof t)return JSON.stringify(t);if(t instanceof Date)return"new Date('"+t.toISOString()+"')";if(Array.isArray(t))return"["+t.map(e.toString).join(", ")+"]";if("function"==typeof t)return(n=t).displayName||n.name||"<function"+n.length+">";var n;if(null==t)return String(t);if("function"==typeof t.toString&&t.toString!==Object.prototype.toString)return t.toString();try{return JSON.stringify(t,null,2)}catch(e){return String(t)}},e.tuple=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t},e.tupleCurried=function(t){return function(e){return[t,e]}},e.apply=function(t){return function(e){return t(e)}},e.applyFlipped=function(t){return function(e){return e(t)}},e.phantom=void 0,e.constIdentity=function(){return e.identity},e.increment=function(t){return t+1},e.decrement=function(t){return t-1}},function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a});var r=n(2),i=n(7);const o=t=>{let e=!1,n=[];const i=new Map,o={id:Symbol(t),add:t=>(i.set(t.id,t),e=!0,o),remove:t=>{const n=i.get(t);return n&&(n.dispose.map(t=>t()),i.delete(t),e=!0),o},get:t=>{const e=i.get(t);return e?Object(r.some)(e):r.none},getAs:t=>i.get(t),getFirstWith:t=>{for(let e of i.values())if(t(e))return Object(r.some)(e);return r.none},getFirstWithName:t=>o.getFirstWith(e=>e.name===t),list:()=>(e&&(n=Array.from(i.values()),e=!1),n),listIds:()=>o.list().map(({id:t})=>t),listWith:t=>o.list().filter(t),has:t=>i.has(t),hasAny:t=>t.some(o.has),hasAll:t=>t.every(o.has)};return o},a=({id:t,dispose:e})=>({id:"string"==typeof t?Symbol(t):t,name:"string"==typeof t?t:Object(i.getSymbolString)(t),dispose:e})},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(30),o=n(13),a=n(10);e.unsafeCompare=function(t,e){return t<e?-1:t>e?1:0},e.ordString=r({},o.setoidString,{compare:e.unsafeCompare}),e.ordNumber=r({},o.setoidNumber,{compare:e.unsafeCompare}),e.ordBoolean=r({},o.setoidBoolean,{compare:e.unsafeCompare}),e.lessThan=function(t){return function(e,n){return-1===t.compare(e,n)}},e.greaterThan=function(t){return function(e,n){return 1===t.compare(e,n)}},e.lessThanOrEq=function(t){return function(e,n){return 1!==t.compare(e,n)}},e.greaterThanOrEq=function(t){return function(e,n){return-1!==t.compare(e,n)}},e.min=function(t){return function(e,n){return 1===t.compare(e,n)?n:e}},e.max=function(t){return function(e,n){return-1===t.compare(e,n)?n:e}},e.clamp=function(t){var n=e.min(t),r=e.max(t);return function(t,e){return function(i){return r(n(i,e),t)}}},e.between=function(t){var n=e.lessThan(t),r=e.greaterThan(t);return function(t,e){return function(i){return!n(i,t)&&!r(i,e)}}},e.fromCompare=function(t){var e=function(e,n){return e===n?0:t(e,n)};return{equals:function(t,n){return 0===e(t,n)},compare:e}},e.contramap=function(t,n){return e.fromCompare(a.on(n.compare)(t))},e.getSemigroup=function(){return{concat:function(t,n){return e.fromCompare(function(e,r){return i.semigroupOrdering.concat(t.compare(e,r),n.compare(e,r))})}}},e.getTupleOrd=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.length;return e.fromCompare(function(e,n){for(var i=0;i<r-1;i++){var o=t[i].compare(e[i],n[i]);if(0!==o)return o}return t[i].compare(e[i],n[i])})},e.getProductOrd=function(t,n){return e.getTupleOrd(t,n)},e.getDualOrd=function(t){return e.fromCompare(function(e,n){return t.compare(n,e)})},e.ordDate=e.contramap(function(t){return t.valueOf()},e.ordNumber)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fromEquals=function(t){return{equals:function(e,n){return e===n||t(e,n)}}},e.strictEqual=function(t,e){return t===e};var r={equals:e.strictEqual};e.setoidString=r,e.setoidNumber=r,e.setoidBoolean=r,e.getArraySetoid=function(t){return e.fromEquals(function(e,n){return e.length===n.length&&e.every(function(e,r){return t.equals(e,n[r])})})},e.getStructSetoid=function(t){return e.fromEquals(function(e,n){for(var r in t)if(!t[r].equals(e[r],n[r]))return!1;return!0})},e.getRecordSetoid=function(t){return e.getStructSetoid(t)},e.getTupleSetoid=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.fromEquals(function(e,n){return t.every(function(t,r){return t.equals(e[r],n[r])})})},e.getProductSetoid=function(t,n){return e.getTupleSetoid(t,n)},e.contramap=function(t,n){return e.fromEquals(function(e,r){return n.equals(t(e),t(r))})},e.setoidDate=e.contramap(function(t){return t.valueOf()},e.setoidNumber)},function(t,e){},function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>{const e=t.toString();return e.substring(7,e.length-1)}},function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return l});var r=n(3),i=n(5),o=n(4),a=n(1),s=n(8),u=n(0),c=function(){return(c=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},f=function(){function e(t,n){void 0===n&&(n=e.defaultOptions);var i=this;this.machine=t,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.children=new Map,this.forwardTo=new Set,this.eventQueue=[],this.init=this.start,this.send=function(t){var e=Object(a.q)(t);if(i.eventQueue.push(e),i.initialized)i.flush();else{if(!i.options.deferEvents)throw new Error('Event "'+e.type+'" was sent to uninitialized service "'+i.machine.id+'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\nEvent: '+JSON.stringify(e));console.warn('Event "'+e.type+'" was sent to uninitialized service "'+i.machine.id+'" and is deferred. Make sure .start() is called for this service.\nEvent: '+JSON.stringify(t))}return i.state},this.sender=function(t){return function(){return this.send(t)}.bind(i)},this.sendTo=function(t,e){var n=e===r.b.Parent,o=n?i.parent:i.children.get(e);if(o)setTimeout(function(){o.send(t)});else{if(!n)throw new Error("Unable to send event to child '"+e+"' from service '"+i.id+"'.");console.warn("Service '"+i.id+"' has no parent: unable to send event "+t.type)}};var o=c({},e.defaultOptions,n),s=o.clock,u=o.logger,f=o.parent,l=o.id,d=void 0!==l?l:t.id;Object.assign(this,{clock:s,logger:u,parent:f,id:d}),this.options=o}return Object.defineProperty(e.prototype,"initialState",{get:function(){return this.machine.initialState},enumerable:!0,configurable:!0}),e.prototype.execute=function(t){var e=this;t.actions.forEach(function(n){e.exec(n,t.context,t.event)})},e.prototype.update=function(t,e){var n=this;if(this.state=t,this.options.execute&&this.execute(this.state),this.devTools&&this.devTools.send(e,t),t.event&&this.eventListeners.forEach(function(e){return e(t.event)}),this.listeners.forEach(function(e){return e(t,t.event)}),this.contextListeners.forEach(function(t){return t(n.state.context,n.state.history?n.state.history.context:void 0)}),this.state.tree&&this.state.tree.done){var r=this.state.tree.getDoneData(this.state.context,Object(a.q)(e));this.doneListeners.forEach(function(t){return t(Object(a.e)(n.id,r))}),this.stop()}},e.prototype.onTransition=function(t){return this.listeners.add(t),this},e.prototype.onEvent=function(t){return this.eventListeners.add(t),this},e.prototype.onSend=function(t){return this.sendListeners.add(t),this},e.prototype.onChange=function(t){return this.contextListeners.add(t),this},e.prototype.onStop=function(t){return this.stopListeners.add(t),this},e.prototype.onDone=function(t){return this.doneListeners.add(t),this},e.prototype.off=function(t){return this.listeners.delete(t),this.eventListeners.delete(t),this.sendListeners.delete(t),this.stopListeners.delete(t),this.doneListeners.delete(t),this.contextListeners.delete(t),this},e.prototype.start=function(t){var e=void 0===t?this.machine.initialState:t instanceof i.a?this.machine.resolveState(t):this.machine.resolveState(i.a.from(t));return this.initialized=!0,this.options.devTools&&this.attachDev(),this.update(e,{type:o.d}),this.flush(),this},e.prototype.stop=function(){var t=this;return this.listeners.forEach(function(e){return t.listeners.delete(e)}),this.stopListeners.forEach(function(e){e(),t.stopListeners.delete(e)}),this.contextListeners.forEach(function(e){return t.contextListeners.delete(e)}),this.doneListeners.forEach(function(e){return t.doneListeners.delete(e)}),this.children.forEach(function(t){"function"==typeof t.stop&&t.stop()}),Object.keys(this.delayedEventsMap).forEach(function(e){t.clock.clearTimeout(t.delayedEventsMap[e])}),this.initialized=!1,this},e.prototype.flush=function(){if(!this.isFlushing){for(this.isFlushing=!0;this.eventQueue.length;){var t=this.eventQueue.shift(),e=this.nextState(t);this.update(e,t),this.forward(t)}this.isFlushing=!1}},e.prototype.nextState=function(t){var e=Object(a.q)(t);if(e.type===o.c&&-1===this.state.nextEvents.indexOf(o.c))throw e.data;return this.machine.transition(this.state,e,this.state.context)},e.prototype.forward=function(t){var e=this;this.forwardTo.forEach(function(n){var r=e.children.get(n);if(!r)throw new Error("Unable to forward event '"+t+"' from interpreter '"+e.id+"' to nonexistant child '"+n+"'.");r.send(t)})},e.prototype.defer=function(t){var e=this,n=t.delay;if("string"==typeof n){if(!this.machine.options.delays||void 0===this.machine.options.delays[n])return void console.warn("No delay reference for delay expression '"+n+"' was found on machine '"+this.machine.id+"' on service '"+this.id+"'.");var r=this.machine.options.delays[n];n="number"==typeof r?r:r(this.state.context,this.state.event)}this.delayedEventsMap[t.id]=this.clock.setTimeout(function(){t.to?e.sendTo(t.event,t.to):e.send(t.event)},n||0)},e.prototype.cancel=function(t){this.clock.clearTimeout(this.delayedEventsMap[t]),delete this.delayedEventsMap[t]},e.prototype.exec=function(t,e,n){if(t.exec)return t.exec(e,n,{action:t,state:this.state});switch(t.type){case o.i:var i=t;if(i.delay)return void this.defer(i);i.to?this.sendTo(i.event,i.to):this.send(i.event);break;case o.b:this.cancel(t.sendId);break;case o.j:var a=t.activity;if(!this.state.activities[a.type])break;if(a.type===r.a.Invoke){var s=this.machine.options.services?this.machine.options.services[a.src]:void 0,c=a.id,f=a.data,l=!!a.forward;if(!s)return void console.warn("No service found for invocation '"+a.src+"' in machine '"+this.machine.id+"'.");var d="function"==typeof s?s(e,n):s;d instanceof Promise?this.spawnPromise(c,d):"function"==typeof d?this.spawnCallback(c,d):"string"!=typeof d&&this.spawn(f?d.withContext(Object(u.e)(f,e,n)):d,{id:c,autoForward:l})}else{var h=this.machine.options&&this.machine.options.activities?this.machine.options.activities[a.type]:void 0;if(!h)return void console.warn("No implementation found for activity '"+a.type+"'");var p=h(e,a);this.spawnEffect(a.id,p)}break;case o.k:this.stopChild(t.activity.id);break;case o.f:var v=t.expr?t.expr(e,n):void 0;t.label?this.logger(t.label,v):this.logger(v);break;default:console.warn("No implementation found for action type '"+t.type+"'")}},e.prototype.stopChild=function(t){var e=this.children.get(t);e&&"function"==typeof e.stop&&(e.stop(),this.children.delete(t),this.forwardTo.delete(t))},e.prototype.spawn=function(t,n){var r=this;void 0===n&&(n={});var i=new e(t,{parent:this,id:n.id||t.id});return i.onDone(function(t){r.send(t)}).start(),this.children.set(i.id,i),n.autoForward&&this.forwardTo.add(i.id),i},e.prototype.spawnPromise=function(t,e){var n=this,r=!1;e.then(function(e){r||n.send(Object(a.e)(t,e))}).catch(function(e){r||n.send(Object(a.f)(e,t))}),this.children.set(t,{send:function(){},stop:function(){r=!0}})},e.prototype.spawnCallback=function(t,e){var n,r=this,i=function(e){s.a||console.warn("Event '"+e.type+"' sent to callback service '"+t+"' but was not handled by a listener.")};try{(n=e(function(t){return r.send(t)},function(t){i=t}))instanceof Promise&&n.catch(function(e){return r.send(Object(a.f)(e,t))})}catch(e){this.send(Object(a.f)(e,t))}this.children.set(t,{send:i,stop:n})},e.prototype.spawnEffect=function(t,e){this.children.set(t,{send:function(){},stop:e})},e.prototype.attachDev=function(){this.options.devTools&&"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&(this.devTools=window.__REDUX_DEVTOOLS_EXTENSION__.connect({name:this.id,features:{jump:!1,skip:!1}}),this.devTools.init(this.state))},e.defaultOptions=function(t){return{execute:!0,deferEvents:!0,clock:{setTimeout:function(e,n){return t.setTimeout.call(null,e,n)},clearTimeout:function(e){return t.clearTimeout.call(null,e)}},logger:t.console.log.bind(console),devTools:!1}}("undefined"==typeof window?t:window),e.interpret=l,e}();function l(t,e){return new f(t,e)}}).call(this,n(31))},function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return B});var r,i,o=n(6);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */!function(t){t.PADDLE1="paddle1",t.PADDLE2="paddle2",t.LEFT_WALL="leftWall",t.RIGHT_WALL="rightWall",t.TOP_WALL="topWall",t.BOTTOM_WALL="bottomWall"}(r||(r={})),function(t){t[t.BALL=0]="BALL",t[t.PADDLE1=1]="PADDLE1",t[t.PADDLE2=2]="PADDLE2",t[t.SCOREBOARD=3]="SCOREBOARD",t[t.BG=4]="BG"}(i||(i={}));let a;const s=()=>{if(!a){const t=window.AudioContext||window.webkitAudioContext||void 0;t||alert("Sorry, but the Web Audio API is not supported by your browser."),a=new t}return a},u=t=>e=>{const n=s().createOscillator();n.type="square",n.frequency.setValueAtTime(t,s().currentTime),n.connect(s().destination),n.start(),setTimeout(()=>n.stop(),e)},c=u(440),f=u(110),l=u(880),d=u(320),h=t=>{switch(t){case r.PADDLE1:case r.PADDLE2:c(100);break;case r.LEFT_WALL:f(200);break;case r.RIGHT_WALL:l(200);break;case r.TOP_WALL:case r.BOTTOM_WALL:d(100);break;default:(t=>{throw new Error("unreachable")})()}},p=()=>{const t=document.createElement("canvas");return t.style.position="absolute",t.style.left="0px",t.style.top="0px",t.style.width="100%",t.style.height="100%",t.style.zIndex="-1000",t.setAttribute("width","100%"),t.setAttribute("height","100%"),document.getElementById("app").appendChild(t),t},v=t=>t.getContext("2d"),g=t=>e=>()=>{const{width:n,height:r}=t,i=Math.min(n,r);e.clearRect(0,0,n,r);const o=e.createRadialGradient(.3*n,.3*r,0,.7*n,.7*r,i);o.addColorStop(0,"rgba(19, 57, 114, 1)"),o.addColorStop(1,"rgba(13, 34, 66, 1)"),e.fillStyle="black",e.fillRect(0,0,n,r)},y=new Map,m=t=>{const e=document.createElement("canvas"),n=e.getContext("2d");return e.width=t.canvasWidth,e.height=t.canvasHeight,n.fillStyle="blue",n.fillRect(0,0,t.canvasWidth,t.canvasHeight),e},b=t=>{const e=t.ballRadius,n=document.createElement("canvas"),r=n.getContext("2d");n.width=2*e,n.height=2*e;const i=n.width/2,o=n.height/2;return r.beginPath(),r.arc(i,o,e,0,2*Math.PI,!1),r.closePath(),r.fillStyle="white",r.fill(),n},S=t=>{const e=t.paddleWidth,n=t.paddleHeight;let r=10;const i=document.createElement("canvas"),o=i.getContext("2d");return i.width=e,i.height=n,e<2*r&&(r=e/2),n<2*r&&(r=n/2),o.beginPath(),o.moveTo(r,0),o.arcTo(e,0,e,n,r),o.arcTo(e,n,0,n,r),o.arcTo(0,n,0,0,r),o.arcTo(0,0,e,0,r),o.closePath(),o.fillStyle="white",o.fill(),i},w=t=>e=>{const n=document.createElement("canvas"),r=n.getContext("2d");return n.width=t.canvasWidth,n.height=t.canvasHeight,r.font='50px "Press Start 2P"',r.textAlign="center",r.fillStyle="white",r.textBaseline="top",r.fillText(e,n.width/2,10),n},O=t=>e=>{const n=t.createTexture();return t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,1),t.bindTexture(t.TEXTURE_2D,n),x(e.width)&&x(e.height)?t.generateMipmap(t.TEXTURE_2D):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR)),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),{texture:n,width:e.width,height:e.height}},x=t=>0==(t&t-1),E=t=>e=>{let n={1:0,2:0};const r=t=>n[t],o=()=>{const n=r(1)+" | "+r(2);(t=>e=>n=>{y.set(i.SCOREBOARD,O(e)(w(t)(n)))})(t)(e.gl)(n)};return o(),{addPoint:t=>{n[t]++,o()},getScore:r}},_=({constants:t,gl:e,program:n,camera:r})=>{e.useProgram(n);const i=o.a.create(),a=o.a.create(),s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,1,1,0]),e.STATIC_DRAW);const u=e.getAttribLocation(n,"a_vertex");e.vertexAttribPointer(u,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(u);const c=e.getUniformLocation(n,"u_size"),f=e.getUniformLocation(n,"u_transform"),l=e.getUniformLocation(n,"u_image"),d=e.getUniformLocation(n,"u_textureSize");return s=>{e.useProgram(n),o.a.fromScaling(i,[t.canvasWidth,t.canvasHeight,1]);const u=r.getModelViewProjection(a);e.uniformMatrix4fv(f,!1,u),e.uniformMatrix4fv(c,!1,i),e.uniform1i(l,0),e.uniform2fv(d,Float32Array.from([t.canvasWidth,t.canvasHeight])),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,s)}},T=[1,1,1,1,1,1,1,1,1],j=t=>{const e=t.reduce(function(t,e){return t+e});return e<=0?1:e},A=({gl:t,canvas:e,programs:n,camera:r,constants:i})=>{let o;const a=t.createFramebuffer(),s=M(t)(i.canvasWidth)(i.canvasHeight),u=M(t)(i.canvasWidth)(i.canvasHeight),c=(t=>{const{gl:e,program:n}=t,r=_(t),i=e.getUniformLocation(n,"u_kernel"),o=e.getUniformLocation(n,"u_kernelWeight");return t=>n=>{e.uniform1f(o,j(t)),e.uniform1fv(i,t),r(n),e.drawArrays(e.TRIANGLE_STRIP,0,4)}})({gl:t,constants:i,program:n.conv,camera:r,canvas:e}),f=(t=>{const{gl:e}=t,n=_(t);return t=>{n(t),e.drawArrays(e.TRIANGLE_STRIP,0,4)}})({gl:t,constants:i,program:n.crt,camera:r,canvas:e}),l=e=>n=>r=>{const a=o?s:u,c=o?u:s;t.useProgram(n),t.bindFramebuffer(t.FRAMEBUFFER,e),null!=e&&(t.bindTexture(t.TEXTURE_2D,c),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,c,0),t.viewport(0,0,i.canvasWidth,i.canvasHeight)),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),r(a),o=!o};return{render:t=>{l(a)(n.scene)(t),l(a)(n.conv)(c(T)),l(null)(n.crt)(f)}}},M=t=>e=>n=>{const r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,n,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),r};var P="attribute vec2 a_vertex;\n    \nvarying vec2 v_texCoord;\n    \nuniform mat4 u_transform;\nuniform mat4 u_size;\n    \nvoid main() {     \n    gl_Position = u_transform * (u_size * vec4(a_vertex,0,1));\n    v_texCoord = a_vertex;\n}\n",N="precision mediump float;\n    \nuniform sampler2D u_image;\n\nvarying vec2 v_texCoord;\n    \nvoid main() {\n    gl_FragColor = texture2D(u_image, v_texCoord);\n}\n",R="precision mediump float;\n\nuniform sampler2D u_image;\nuniform vec2 u_textureSize;\nuniform float u_kernel[9];\nuniform float u_kernelWeight;\n \n// the texCoords passed in from the vertex shader.\nvarying vec2 v_texCoord;\n \nvoid main() {\n    vec2 pos = v_texCoord;\n    gl_FragColor = texture2D(u_image, pos);\n\n    //Convolution (blur)\n    if(gl_FragColor.a > 0.0) {\n        vec2 onePixel = vec2(1.0, 1.0) / u_textureSize;\n        vec4 colorSum =\n            texture2D(u_image, v_texCoord + onePixel * vec2(-1, -1)) * u_kernel[0] +\n            texture2D(u_image, v_texCoord + onePixel * vec2( 0, -1)) * u_kernel[1] +\n            texture2D(u_image, v_texCoord + onePixel * vec2( 1, -1)) * u_kernel[2] +\n            texture2D(u_image, v_texCoord + onePixel * vec2(-1,  0)) * u_kernel[3] +\n            texture2D(u_image, v_texCoord + onePixel * vec2( 0,  0)) * u_kernel[4] +\n            texture2D(u_image, v_texCoord + onePixel * vec2( 1,  0)) * u_kernel[5] +\n            texture2D(u_image, v_texCoord + onePixel * vec2(-1,  1)) * u_kernel[6] +\n            texture2D(u_image, v_texCoord + onePixel * vec2( 0,  1)) * u_kernel[7] +\n            texture2D(u_image, v_texCoord + onePixel * vec2( 1,  1)) * u_kernel[8] ;\n\n        // Divide the sum by the weight but just use rgb\n        // we'll set alpha to 1.0\n        gl_FragColor = vec4((colorSum / u_kernelWeight).rgb, 1.0);\n    }\n\n}\n",C="precision mediump float;\n\nconst float PI = 3.1415926535;\n\nuniform sampler2D u_image;\nuniform float u_distortion;\n\nvarying vec2 v_texCoord;\n\nvec2 Distort(vec2 p)\n{\n    float theta  = atan(p.y, p.x);\n    float radius = length(p);\n    radius = pow(radius, u_distortion);\n    p.x = radius * cos(theta);\n    p.y = radius * sin(theta);\n    return 0.5 * (p + 1.0);\n}\n\nvoid main()\n{\n  vec2 uv = v_texCoord;\n  vec2 xy = 2.0 * uv - 1.0;\n  float d = length(xy);\n  if (d < 1.0)\n  {\n    uv = Distort(xy);\n  }\n  vec4 c = texture2D(u_image, uv);\n  gl_FragColor = c;\n}\n",L="precision mediump float;\n/*\n    Old CRT Monitor Effect Fragment Shader.\n*/\nuniform sampler2D u_image;\nuniform float u_time;\n\nvarying vec2 v_texCoord;\n\nvoid main()\n{\n  vec3 color = texture2D(u_image, v_texCoord).rgb;\n\n  color -= abs(sin(v_texCoord.y * 100.0 + u_time * 5.0)) * 0.08; // (1)\n  color -= abs(sin(v_texCoord.y * 300.0 - u_time * 10.0)) * 0.05; // (2)\n\n  gl_FragColor = vec4(color, 1.0).rgba;\n}\n",I="/*\n    crt-pi - A Raspberry Pi friendly CRT shader.\n\n    Copyright (C) 2015-2016 davej\n\n    This program is free software; you can redistribute it and/or modify it\n    under the terms of the GNU General Public License as published by the Free\n    Software Foundation; either version 2 of the License, or (at your option)\n    any later version.\n\n\nNotes:\n\nThis shader is designed to work well on Raspberry Pi GPUs (i.e. 1080P @ 60Hz on a game with a 4:3 aspect ratio). It pushes the Pi's GPU hard and enabling some features will slow it down so that it is no longer able to match 1080P @ 60Hz. You will need to overclock your Pi to the fastest setting in raspi-config to get the best results from this shader: 'Pi2' for Pi2 and 'Turbo' for original Pi and Pi Zero. Note: Pi2s are slower at running the shader than other Pis, this seems to be down to Pi2s lower maximum memory speed. Pi2s don't quite manage 1080P @ 60Hz - they drop about 1 in 1000 frames. You probably won't notice this, but if you do, try enabling FAKE_GAMMA.\n\nSCANLINES enables scanlines. You'll almost certainly want to use it with MULTISAMPLE to reduce moire effects. SCANLINE_WEIGHT defines how wide scanlines are (it is an inverse value so a higher number = thinner lines). SCANLINE_GAP_BRIGHTNESS defines how dark the gaps between the scan lines are. Darker gaps between scan lines make moire effects more likely.\n\nGAMMA enables gamma correction using the values in INPUT_GAMMA and OUTPUT_GAMMA. FAKE_GAMMA causes it to ignore the values in INPUT_GAMMA and OUTPUT_GAMMA and approximate gamma correction in a way which is faster than true gamma whilst still looking better than having none. You must have GAMMA defined to enable FAKE_GAMMA.\n\nCURVATURE distorts the screen by CURVATURE_X and CURVATURE_Y. Curvature slows things down a lot.\n\nBy default the shader uses linear blending horizontally. If you find this too blury, enable SHARPER.\n\nBLOOM_FACTOR controls the increase in width for bright scanlines.\n\n*/\n\n\n// Haven't put these as parameters as it would slow the code down.\n//#define SCANLINES\n#define MULTISAMPLE\n#define GAMMA\n#define FAKE_GAMMA\n#define CURVATURE\n#define SHARPER\n// MASK_TYPE: 0 = none, 1 = green/magenta, 2 = trinitron(ish)\n#define MASK_TYPE 2\n\n\n#define COMPAT_PRECISION mediump\nprecision mediump float;\n\n#define CURVATURE_X 0.10\n#define CURVATURE_Y 0.25\n#define MASK_BRIGHTNESS 0.70\n#define SCANLINE_WEIGHT 6.0\n#define SCANLINE_GAP_BRIGHTNESS 0.12\n#define BLOOM_FACTOR 1.5\n#define INPUT_GAMMA 2.4\n#define OUTPUT_GAMMA 2.2\n\n\nuniform vec2 u_textureSize;\n#if defined(CURVATURE)\n    varying vec2 screenScale;\n#endif\nvarying float filterWidth;\nvarying vec2 v_texCoord;\n\n#if defined(VERTEX)\n    attribute vec2 a_vertex;\n    uniform mat4 u_transform;\n    uniform mat4 u_size;\n    uniform vec2 u_inputSize;\n    uniform vec2 u_outputSize;\n    void main() {\n        #if defined(CURVATURE)\n\t    screenScale = vec2(1.0, 1.0); //u_textureSize / u_inputSize;\n        #endif\n\tfilterWidth = 1.0 / 3.0; //(u_inputSize.y / u_outputSize.y) / 3.0;\n        v_texCoord = a_vertex;\n        gl_Position = u_transform * (u_size * vec4(a_vertex,0,1));\n    }\n#endif\n\n#if defined(FRAGMENT)\n\n    uniform sampler2D u_image;\n\n    #if defined(CURVATURE)\n        vec2 CURVATURE_DISTORTION = vec2(CURVATURE_X, CURVATURE_Y);\n        // Barrel distortion shrinks the display area a bit, this will allow us to counteract that.\n        vec2 barrelScale = 1.0 - (0.23 * CURVATURE_DISTORTION);\n\n        vec2 Distort(vec2 coord) {\n\t    coord *= screenScale;\n\t    coord -= vec2(0.5);\n\t    float rsq = coord.x * coord.x + coord.y * coord.y;\n\t    coord += coord * (CURVATURE_DISTORTION * rsq);\n\t    coord *= barrelScale;\n\t    if (abs(coord.x) >= 0.5 || abs(coord.y) >= 0.5) {\n\t\tcoord = vec2(-1.0);\t\t// If out of bounds, return an invalid value.\n            } else {\n\t\tcoord += vec2(0.5);\n\t\tcoord /= screenScale;\n\t    }\n\n\t    return coord;\n        }\n    #endif\n\n    float CalcScanLineWeight(float dist) {\n\treturn max(1.0-dist*dist*SCANLINE_WEIGHT, SCANLINE_GAP_BRIGHTNESS);\n    }\n\n    float CalcScanLine(float dy) {\n\tfloat scanLineWeight = CalcScanLineWeight(dy);\n        #if defined(MULTISAMPLE)\n\t    scanLineWeight += CalcScanLineWeight(dy-filterWidth);\n\t    scanLineWeight += CalcScanLineWeight(dy+filterWidth);\n\t    scanLineWeight *= 0.3333333;\n        #endif\n\treturn scanLineWeight;\n    }\n\n    void main() {\n        #if defined(CURVATURE)\n\t    vec2 texcoord = Distort(v_texCoord);\n\t    if (texcoord.x < 0.0) {\n\t\tgl_FragColor = vec4(0.0);\n            } else {\n        #else\n\t        vec2 texcoord = v_texCoord;\n        #endif\n\t    vec2 texcoordInPixels = texcoord * u_textureSize;\n                #if defined(SHARPER)\n\t\t    vec2 tempCoord = floor(texcoordInPixels) + 0.5;\n\t\t    vec2 coord = tempCoord / u_textureSize;\n\t\t    vec2 deltas = texcoordInPixels - tempCoord;\n\t\t    float scanLineWeight = CalcScanLine(deltas.y);\n\t\t    vec2 signs = sign(deltas);\n\t\t    deltas.x *= 2.0;\n\t\t    deltas = deltas * deltas;\n\t\t    deltas.y = deltas.y * deltas.y;\n\t\t    deltas.x *= 0.5;\n\t\t    deltas.y *= 8.0;\n\t\t    deltas /= u_textureSize;\n\t\t    deltas *= signs;\n\t\t    vec2 tc = coord + deltas;\n                #else\n\t\t    float tempY = floor(texcoordInPixels.y) + 0.5;\n\t\t    float yCoord = tempY / u_textureSize.y;\n\t\t    float dy = texcoordInPixels.y - tempY;\n\t\t    float scanLineWeight = CalcScanLine(dy);\n\t\t    float signY = sign(dy);\n\t\t    dy = dy * dy;\n\t\t    dy = dy * dy;\n\t\t    dy *= 8.0;\n\t\t    dy /= u_textureSize.y;\n\t\t    dy *= signY;\n\t\t    vec2 tc = vec2(texcoord.x, yCoord + dy);\n                #endif\n\n\t\tvec3 colour = texture2D(u_image, tc).rgb;\n\n                #if defined(SCANLINES)\n                    #if defined(GAMMA)\n                        #if defined(FAKE_GAMMA)\n\t\t            colour = colour * colour;\n                        #else\n\t\t            colour = pow(colour, vec3(INPUT_GAMMA));\n                    #endif\n                #endif\n\t\tscanLineWeight *= BLOOM_FACTOR;\n\t\tcolour *= scanLineWeight;\n\n                #if defined(GAMMA)\n                    #if defined(FAKE_GAMMA)\n\t\t        colour = sqrt(colour);\n                    #else\n\t\t        colour = pow(colour, vec3(1.0/OUTPUT_GAMMA));\n                    #endif\n                #endif\n        #endif\n        #if MASK_TYPE == 0\n            gl_FragColor = vec4(colour, 1.0);\n        #else\n            #if MASK_TYPE == 1\n\t\tfloat whichMask = fract(gl_FragCoord.x * 0.5);\n\t\tvec3 mask;\n\t\tif (whichMask < 0.5)\n\t\t\tmask = vec3(MASK_BRIGHTNESS, 1.0, MASK_BRIGHTNESS);\n\t\telse\n\t\t\tmask = vec3(1.0, MASK_BRIGHTNESS, 1.0);\n            #elif MASK_TYPE == 2\n\t\tfloat whichMask = fract(gl_FragCoord.x * 0.3333333);\n\t\tvec3 mask = vec3(MASK_BRIGHTNESS, MASK_BRIGHTNESS, MASK_BRIGHTNESS);\n\t\tif (whichMask < 0.3333333)\n\t\t\tmask.x = 1.0;\n\t\telse if (whichMask < 0.6666666)\n\t\t\tmask.y = 1.0;\n\t\telse\n\t\t\tmask.z = 1.0;\n            #endif\n\n\t    gl_FragColor = vec4(colour * mask, 1.0);\n        #endif\n\n    #if defined(CURVATURE)\n        }\n    #endif \n}\n#endif\n";const D={vertex:"#define VERTEX\n"+I,fragment:"#define FRAGMENT\n"+I},k=t=>new Promise((e,n)=>{const r=U(t),a=F(r)({premultipliedAlpha:!1}),s=[{vertex:P,fragment:N},{vertex:P,fragment:R},{vertex:P,fragment:C},{vertex:P,fragment:L},D].map(V(a)),u=s.find(t=>t instanceof Error);if(u)return void n(u);const c={scene:s[0],conv:s[1],barrel:s[2],scanlines:s[3],crt:s[4]};(t=>e=>{y.set(i.BALL,O(e)(b(t))),y.set(i.PADDLE1,O(e)(S(t))),y.set(i.PADDLE2,O(e)(S(t))),y.set(i.BG,O(e)(m(t)))})(t)(a),a.clearColor(0,0,0,0),a.enable(a.BLEND),a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);const f=(t=>{const e=o.a.create(),n=o.a.ortho(new Float64Array(16),0,t.canvasWidth,0,t.canvasHeight,0,1);return{getModelViewProjection:t=>{const r=o.a.create();return o.a.multiply(r,e,t),o.a.multiply(r,n,r),r}}})(t),l=W({gl:a,canvas:r,constants:t}),d=(({gl:t,program:e,camera:n})=>{t.useProgram(e);const r=o.a.create(),a=o.a.create(),s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,1,1,0]),t.STATIC_DRAW);const u=t.getAttribLocation(e,"a_vertex");t.vertexAttribPointer(u,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(u);const c=t.getUniformLocation(e,"u_size"),f=t.getUniformLocation(e,"u_transform"),l=t.getUniformLocation(e,"u_image");t.uniform1i(l,0);const d=e=>{const i=y.get(e.id);o.a.fromTranslation(a,[null!=e.x?e.x-i.width/2:0,null!=e.y?e.y-i.height/2:0,0]);const s=n.getModelViewProjection(a);t.uniformMatrix4fv(f,!1,s),o.a.fromScaling(r,[i.width,i.height,1]),t.uniformMatrix4fv(c,!1,r),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,i.texture),t.drawArrays(t.TRIANGLE_STRIP,0,4)};return t=>{d({id:i.BG}),t.forEach(d)}})({gl:a,constants:t,canvas:r,program:c.scene,camera:f}),h=A({gl:a,canvas:r,programs:c,camera:f,constants:t}),p=()=>{l({width:window.innerWidth,height:window.innerHeight})};p(),window.addEventListener("resize",p),e({gl:a,render:t=>{h.render(()=>d(t))},canvas:r})}),U=t=>{const e=document.createElement("canvas");return e.style.position="absolute",e.setAttribute("width",`${t.canvasWidth}`),e.setAttribute("height",`${t.canvasHeight}`),document.getElementById("app").appendChild(e),e},F=t=>e=>t.getContext("webgl",e)||t.getContext("experimental-webgl",e),W=({gl:t,canvas:e,constants:n})=>{let r={};return i=>{if(r.width!==i.width||r.height!==i.height){const o=Math.min(i.width/n.canvasWidth,i.height/n.canvasHeight),a=n.canvasWidth*o,s=n.canvasHeight*o;e.style.left=`${(i.width-a)/2}px`,e.style.top=`${(i.height-s)/2}px`,e.style.width=`${a}px`,e.style.height=`${s}px`,t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),r.width=i.width,r.height=i.height}}},V=t=>e=>{const n=t.createProgram();let r,i;const o=()=>{void 0!==r&&r instanceof WebGLShader&&t.deleteShader(r),void 0!==i&&i instanceof WebGLShader&&t.deleteShader(i),t.deleteProgram(n)},a=e=>r=>{const i=t.createShader(e);if(t.shaderSource(i,r),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS)){const n=`${(e=>e===t.VERTEX_SHADER?"vertex":"fragment")(e)} error: `+t.getShaderInfoLog(i);throw new Error(n)}return t.attachShader(n,i),i};return(r=a(t.VERTEX_SHADER)(e.vertex))instanceof Error?(o(),r):(i=a(t.FRAGMENT_SHADER)(e.fragment))instanceof Error?(o(),i):(t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS)?(t.useProgram(n),n):(o(),new Error("Unable to initialize the shader program: "+t.getProgramInfoLog(n))))};!function(){function e(t,e,n){return t.call.apply(t.bind,arguments)}function r(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function i(t,n,o){return(i=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?e:r).apply(null,arguments)}var o=Date.now||function(){return+new Date};function a(t,e){this.a=t,this.o=e||t,this.c=this.o.document}var s=!!window.FontFace;function u(t,e,n,r){if(e=t.c.createElement(e),n)for(var i in n)n.hasOwnProperty(i)&&("style"==i?e.style.cssText=n[i]:e.setAttribute(i,n[i]));return r&&e.appendChild(t.c.createTextNode(r)),e}function c(t,e,n){(t=t.c.getElementsByTagName(e)[0])||(t=document.documentElement),t.insertBefore(n,t.lastChild)}function f(t){t.parentNode&&t.parentNode.removeChild(t)}function l(t,e,n){e=e||[],n=n||[];for(var r=t.className.split(/\s+/),i=0;i<e.length;i+=1){for(var o=!1,a=0;a<r.length;a+=1)if(e[i]===r[a]){o=!0;break}o||r.push(e[i])}for(e=[],i=0;i<r.length;i+=1){for(o=!1,a=0;a<n.length;a+=1)if(r[i]===n[a]){o=!0;break}o||e.push(r[i])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function d(t,e){for(var n=t.className.split(/\s+/),r=0,i=n.length;r<i;r++)if(n[r]==e)return!0;return!1}function h(t,e,n){function r(){f&&i&&o&&(f(a),f=null)}e=u(t,"link",{rel:"stylesheet",href:e,media:"all"});var i=!1,o=!0,a=null,f=n||null;s?(e.onload=function(){i=!0,r()},e.onerror=function(){i=!0,a=Error("Stylesheet failed to load"),r()}):setTimeout(function(){i=!0,r()},0),c(t,"head",e)}function p(t,e,n,r){var i=t.c.getElementsByTagName("head")[0];if(i){var o=u(t,"script",{src:e}),a=!1;return o.onload=o.onreadystatechange=function(){a||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(a=!0,n&&n(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&i.removeChild(o))},i.appendChild(o),setTimeout(function(){a||(a=!0,n&&n(Error("Script load timeout")))},r||5e3),o}return null}function v(){this.a=0,this.c=null}function g(t){return t.a++,function(){t.a--,m(t)}}function y(t,e){t.c=e,m(t)}function m(t){0==t.a&&t.c&&(t.c(),t.c=null)}function b(t){this.a=t||"-"}function S(t,e){this.c=t,this.f=4,this.a="n";var n=(e||"n4").match(/^([nio])([1-9])$/i);n&&(this.a=n[1],this.f=parseInt(n[2],10))}function w(t){var e=[];t=t.split(/,\s*/);for(var n=0;n<t.length;n++){var r=t[n].replace(/['"]/g,"");-1!=r.indexOf(" ")||/^\d/.test(r)?e.push("'"+r+"'"):e.push(r)}return e.join(",")}function O(t){return t.a+t.f}function x(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function E(t){var e=4,n="n",r=null;return t&&((r=t.match(/(normal|oblique|italic)/i))&&r[1]&&(n=r[1].substr(0,1).toLowerCase()),(r=t.match(/([1-9]00|normal|bold)/i))&&r[1]&&(/bold/i.test(r[1])?e=7:/[1-9]00/.test(r[1])&&(e=parseInt(r[1].substr(0,1),10)))),n+e}function _(t,e){this.c=t,this.f=t.o.document.documentElement,this.h=e,this.a=new b("-"),this.j=!1!==e.events,this.g=!1!==e.classes}function T(t){if(t.g){var e=d(t.f,t.a.c("wf","active")),n=[],r=[t.a.c("wf","loading")];e||n.push(t.a.c("wf","inactive")),l(t.f,n,r)}j(t,"inactive")}function j(t,e,n){t.j&&t.h[e]&&(n?t.h[e](n.c,O(n)):t.h[e]())}function A(){this.c={}}function M(t,e){this.c=t,this.f=e,this.a=u(this.c,"span",{"aria-hidden":"true"},this.f)}function P(t){c(t.c,"body",t.a)}function N(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+w(t.c)+";font-style:"+x(t)+";font-weight:"+t.f+"00;"}function R(t,e,n,r,i,o){this.g=t,this.j=e,this.a=r,this.c=n,this.f=i||3e3,this.h=o||void 0}function C(t,e,n,r,i,o,a){this.v=t,this.B=e,this.c=n,this.a=r,this.s=a||"BESbswy",this.f={},this.w=i||3e3,this.u=o||null,this.m=this.j=this.h=this.g=null,this.g=new M(this.c,this.s),this.h=new M(this.c,this.s),this.j=new M(this.c,this.s),this.m=new M(this.c,this.s),t=N(t=new S(this.a.c+",serif",O(this.a))),this.g.a.style.cssText=t,t=N(t=new S(this.a.c+",sans-serif",O(this.a))),this.h.a.style.cssText=t,t=N(t=new S("serif",O(this.a))),this.j.a.style.cssText=t,t=N(t=new S("sans-serif",O(this.a))),this.m.a.style.cssText=t,P(this.g),P(this.h),P(this.j),P(this.m)}b.prototype.c=function(t){for(var e=[],n=0;n<arguments.length;n++)e.push(arguments[n].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.a)},R.prototype.start=function(){var t=this.c.o.document,e=this,n=o(),r=new Promise(function(r,i){!function a(){o()-n>=e.f?i():t.fonts.load(function(t){return x(t)+" "+t.f+"00 300px "+w(t.c)}(e.a),e.h).then(function(t){1<=t.length?r():setTimeout(a,25)},function(){i()})}()}),i=null,a=new Promise(function(t,n){i=setTimeout(n,e.f)});Promise.race([a,r]).then(function(){i&&(clearTimeout(i),i=null),e.g(e.a)},function(){e.j(e.a)})};var L={D:"serif",C:"sans-serif"},I=null;function D(){if(null===I){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);I=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return I}function k(t,e,n){for(var r in L)if(L.hasOwnProperty(r)&&e===t.f[L[r]]&&n===t.f[L[r]])return!0;return!1}function U(t){var e,n=t.g.a.offsetWidth,r=t.h.a.offsetWidth;(e=n===t.f.serif&&r===t.f["sans-serif"])||(e=D()&&k(t,n,r)),e?o()-t.A>=t.w?D()&&k(t,n,r)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?F(t,t.v):F(t,t.B):function(t){setTimeout(i(function(){U(this)},t),50)}(t):F(t,t.v)}function F(t,e){setTimeout(i(function(){f(this.g.a),f(this.h.a),f(this.j.a),f(this.m.a),e(this.a)},t),0)}function W(t,e,n){this.c=t,this.a=e,this.f=0,this.m=this.j=!1,this.s=n}C.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=o(),U(this)};var V=null;function G(t){0==--t.f&&t.j&&(t.m?((t=t.a).g&&l(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),j(t,"active")):T(t.a))}function B(t){this.j=t,this.a=new A,this.h=0,this.f=this.g=!0}function q(t,e,n,r,o){var a=0==--t.h;(t.f||t.g)&&setTimeout(function(){var t=o||null,s=r||{};if(0===n.length&&a)T(e.a);else{e.f+=n.length,a&&(e.j=a);var u,c=[];for(u=0;u<n.length;u++){var f=n[u],d=s[f.c],h=e.a,p=f;if(h.g&&l(h.f,[h.a.c("wf",p.c,O(p).toString(),"loading")]),j(h,"fontloading",p),h=null,null===V)if(window.FontFace){p=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var v=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);V=p?42<parseInt(p[1],10):!v}else V=!1;h=V?new R(i(e.g,e),i(e.h,e),e.c,f,e.s,d):new C(i(e.g,e),i(e.h,e),e.c,f,e.s,t,d),c.push(h)}for(u=0;u<c.length;u++)c[u].start()}},0)}function H(t,e){this.c=t,this.a=e}function z(t,e){this.c=t,this.a=e}function X(t,e){this.c=t||K,this.a=[],this.f=[],this.g=e||""}W.prototype.g=function(t){var e=this.a;e.g&&l(e.f,[e.a.c("wf",t.c,O(t).toString(),"active")],[e.a.c("wf",t.c,O(t).toString(),"loading"),e.a.c("wf",t.c,O(t).toString(),"inactive")]),j(e,"fontactive",t),this.m=!0,G(this)},W.prototype.h=function(t){var e=this.a;if(e.g){var n=d(e.f,e.a.c("wf",t.c,O(t).toString(),"active")),r=[],i=[e.a.c("wf",t.c,O(t).toString(),"loading")];n||r.push(e.a.c("wf",t.c,O(t).toString(),"inactive")),l(e.f,r,i)}j(e,"fontinactive",t),G(this)},B.prototype.load=function(t){this.c=new a(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,function(t,e,n){var r=[],i=n.timeout;!function(t){t.g&&l(t.f,[t.a.c("wf","loading")]),j(t,"loading")}(e);var r=function(t,e,n){var r,i=[];for(r in e)if(e.hasOwnProperty(r)){var o=t.c[r];o&&i.push(o(e[r],n))}return i}(t.a,n,t.c),o=new W(t.c,e,i);for(t.h=r.length,e=0,n=r.length;e<n;e++)r[e].load(function(e,n,r){q(t,o,e,n,r)})}(this,new _(this.c,t),t)},H.prototype.load=function(t){var e=this,n=e.a.projectId,r=e.a.version;if(n){var i=e.c.o;p(this.c,(e.a.api||"https://fast.fonts.net/jsapi")+"/"+n+".js"+(r?"?v="+r:""),function(r){r?t([]):(i["__MonotypeConfiguration__"+n]=function(){return e.a},function e(){if(i["__mti_fntLst"+n]){var r,o=i["__mti_fntLst"+n](),a=[];if(o)for(var s=0;s<o.length;s++){var u=o[s].fontfamily;null!=o[s].fontStyle&&null!=o[s].fontWeight?(r=o[s].fontStyle+o[s].fontWeight,a.push(new S(u,r))):a.push(new S(u))}t(a)}else setTimeout(function(){e()},50)}())}).id="__MonotypeAPIScript__"+n}else t([])},z.prototype.load=function(t){var e,n,r=this.a.urls||[],i=this.a.families||[],o=this.a.testStrings||{},a=new v;for(e=0,n=r.length;e<n;e++)h(this.c,r[e],g(a));var s=[];for(e=0,n=i.length;e<n;e++)if((r=i[e].split(":"))[1])for(var u=r[1].split(","),c=0;c<u.length;c+=1)s.push(new S(r[0],u[c]));else s.push(new S(r[0]));y(a,function(){t(s,o)})};var K="https://fonts.googleapis.com/css";function Y(t){this.f=t,this.a=[],this.c={}}var $={latin:"BESbswy","latin-ext":"",cyrillic:"",greek:"",khmer:"",Hanuman:""},J={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},Q={i:"i",italic:"i",n:"n",normal:"n"},Z=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function tt(t,e){this.c=t,this.a=e}var et={Arimo:!0,Cousine:!0,Tinos:!0};function nt(t,e){this.c=t,this.a=e}function rt(t,e){this.c=t,this.f=e,this.a=[]}tt.prototype.load=function(t){var e=new v,n=this.c,r=new X(this.a.api,this.a.text),i=this.a.families;!function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r].split(":");3==i.length&&t.f.push(i.pop());var o="";2==i.length&&""!=i[1]&&(o=":"),t.a.push(i.join(o))}}(r,i);var o=new Y(i);!function(t){for(var e=t.f.length,n=0;n<e;n++){var r=t.f[n].split(":"),i=r[0].replace(/\+/g," "),o=["n4"];if(2<=r.length){var a;if(a=[],s=r[1])for(var s,u=(s=s.split(",")).length,c=0;c<u;c++){var f;if((f=s[c]).match(/^[\w-]+$/))if(null==(d=Z.exec(f.toLowerCase())))f="";else{if(f=null==(f=d[2])||""==f?"n":Q[f],null==(d=d[1])||""==d)d="4";else var l=J[d],d=l||(isNaN(d)?"4":d.substr(0,1));f=[f,d].join("")}else f="";f&&a.push(f)}0<a.length&&(o=a),3==r.length&&(a=[],0<(r=(r=r[2])?r.split(","):a).length&&(r=$[r[0]])&&(t.c[i]=r))}for(t.c[i]||(r=$[i])&&(t.c[i]=r),r=0;r<o.length;r+=1)t.a.push(new S(i,o[r]))}}(o),h(n,function(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,n=[],r=0;r<e;r++)n.push(t.a[r].replace(/ /g,"+"));return e=t.c+"?family="+n.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}(r),g(e)),y(e,function(){t(o.a,o.c,et)})},nt.prototype.load=function(t){var e=this.a.id,n=this.c.o;e?p(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",function(e){if(e)t([]);else if(n.Typekit&&n.Typekit.config&&n.Typekit.config.fn){e=n.Typekit.config.fn;for(var r=[],i=0;i<e.length;i+=2)for(var o=e[i],a=e[i+1],s=0;s<a.length;s++)r.push(new S(o,a[s]));try{n.Typekit.load({events:!1,classes:!1,async:!0})}catch(t){}t(r)}},2e3):t([])},rt.prototype.load=function(t){var e=this.f.id,n=this.c.o,r=this;e?(n.__webfontfontdeckmodule__||(n.__webfontfontdeckmodule__={}),n.__webfontfontdeckmodule__[e]=function(e,n){for(var i=0,o=n.fonts.length;i<o;++i){var a=n.fonts[i];r.a.push(new S(a.name,E("font-weight:"+a.weight+";font-style:"+a.style)))}t(r.a)},p(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(t){return t.o.location.hostname||t.a.location.hostname}(this.c)+"/"+e+".js",function(e){e&&t([])})):t([])};var it=new B(window);it.a.c.custom=function(t,e){return new z(e,t)},it.a.c.fontdeck=function(t,e){return new rt(e,t)},it.a.c.monotype=function(t,e){return new H(e,t)},it.a.c.typekit=function(t,e){return new nt(e,t)},it.a.c.google=function(t,e){return new tt(e,t)};var ot={load:i(it.load,it)};"function"==typeof define&&n(27)?define(function(){return ot}):t.exports?t.exports=ot:(window.WebFont=ot,window.WebFontConfig&&it.load(window.WebFontConfig))}();var G=Object.freeze({});const B=t=>(function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})})(void 0,void 0,void 0,function*(){return(()=>{const t=p(),e=v(t),n=g(t)(e),r=()=>{n()};r(),window.addEventListener("resize",r)})(),t=q(t),new Promise(t=>(window.WebFont||G).load({google:{families:["Press Start 2P"]},active:()=>t(null)})).then(()=>k(t)).then(e=>new Promise(n=>{const r=E(t)(e);n({constants:t,addPoint:r.addPoint,render:({ball:t,paddle1:n,paddle2:r})=>{e.render([Object.assign({id:i.BALL},t),Object.assign({id:i.PADDLE1},n),Object.assign({id:i.PADDLE2},r),{id:i.SCOREBOARD}])},playCollisionAudio:h})}))}),q=t=>Object.assign({ballRadius:7,ballSpeed:1,paddleWidth:20,paddleHeight:130,paddleMargin:30,canvasWidth:1024,canvasHeight:768},t)}).call(this,n(26)(t))},,,,,,,,,function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(10),o=n(29);e.fold=function(t){return o.fold(t)(t.empty)},e.getTupleMonoid=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r({},o.getTupleSemigroup.apply(void 0,t),{empty:t.map(function(t){return t.empty})})},e.getProductMonoid=function(t,n){return e.getTupleMonoid(t,n)},e.getDualMonoid=function(t){return r({},o.getDualSemigroup(t),{empty:t.empty})},e.monoidAll=r({},o.semigroupAll,{empty:!0}),e.monoidAny=r({},o.semigroupAny,{empty:!1});e.unsafeMonoidArray={concat:i.concat,empty:[]},e.getArrayMonoid=function(){return e.unsafeMonoidArray};var a={};e.getDictionaryMonoid=function(t){return r({},o.getDictionarySemigroup(t),{empty:a})},e.monoidSum=r({},o.semigroupSum,{empty:0}),e.monoidProduct=r({},o.semigroupProduct,{empty:1}),e.monoidString=r({},o.semigroupString,{empty:""}),e.monoidVoid=r({},o.semigroupVoid,{empty:void 0}),e.getFunctionMonoid=function(t){return function(){return r({},o.getFunctionSemigroup(t)(),{empty:function(){return t.empty}})}},e.getEndomorphismMonoid=function(){return{concat:i.compose,empty:i.identity}},e.getStructMonoid=function(t){for(var e={},n=0,i=Object.keys(t);n<i.length;n++){var a=i[n];e[a]=t[a].empty}return r({},o.getStructSemigroup(t),{empty:e})},e.getRecordMonoid=function(t){return e.getStructMonoid(t)},e.getMeetMonoid=function(t){return r({},o.getMeetSemigroup(t),{empty:t.top})},e.getJoinMonoid=function(t){return r({},o.getJoinSemigroup(t),{empty:t.bottom})}},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(12),o=n(10);function a(t){return{concat:function(e,n){for(var i=r({},e),o=Object.keys(n),a=o.length,s=0;s<a;s++){var u=o[s];i[u]=e.hasOwnProperty(u)?t.concat(e[u],n[u]):n[u]}return i}}}e.fold=function(t){return function(e){return function(n){return n.reduce(t.concat,e)}}},e.getFirstSemigroup=function(){return{concat:o.identity}},e.getLastSemigroup=function(){return{concat:function(t,e){return e}}},e.getTupleSemigroup=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return{concat:function(e,n){return t.map(function(t,r){return t.concat(e[r],n[r])})}}},e.getProductSemigroup=function(t,n){return e.getTupleSemigroup(t,n)},e.getDualSemigroup=function(t){return{concat:function(e,n){return t.concat(n,e)}}},e.getFunctionSemigroup=function(t){return function(){return{concat:function(e,n){return function(r){return t.concat(e(r),n(r))}}}}},e.getStructSemigroup=function(t){return{concat:function(e,n){for(var r={},i=0,o=Object.keys(t);i<o.length;i++){var a=o[i];r[a]=t[a].concat(e[a],n[a])}return r}}},e.getRecordSemigroup=function(t){return e.getStructSemigroup(t)},e.getMeetSemigroup=function(t){return{concat:i.min(t)}},e.getJoinSemigroup=function(t){return{concat:i.max(t)}},e.semigroupAll={concat:function(t,e){return t&&e}},e.semigroupAny={concat:function(t,e){return t||e}},e.getArraySemigroup=function(){return{concat:o.concat}},e.getDictionarySemigroup=a;var s=a(e.getLastSemigroup());e.getObjectSemigroup=function(){return s},e.semigroupSum={concat:function(t,e){return t+e}},e.semigroupProduct={concat:function(t,e){return t*e}},e.semigroupString={concat:function(t,e){return t+e}},e.semigroupVoid={concat:function(){}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sign=function(t){return t<=-1?-1:t>=1?1:0},e.setoidOrdering={equals:function(t,e){return t===e}},e.semigroupOrdering={concat:function(t,e){return 0!==t?t:e}},e.invert=function(t){switch(t){case-1:return 1;case 1:return-1;default:return 0}}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.r(e);var r=n(17),i=n(7),o=n(2);const a=Symbol("renderable"),s=t=>{const e=j({id:a,dispose:o.none});return Object.assign({worldId:t},e)},u=Symbol("transform"),c=()=>Object.assign({},j({id:u,dispose:o.none}),{pos:{x:0,y:0}});n(0);var f=n(8);n(5);var l=n(1),d=n(16);n(3);var h={raise:l.i,send:l.k,sendParent:l.l,log:l.h,cancel:l.c,start:l.m,stop:l.n,assign:l.b,after:l.a,done:l.d};const{assign:p}=h,v=(g={id:"polarController",initial:"neutral",context:{triggers:new Set},states:{neutral:{onEntry:"clearTriggers",on:{START_POSITIVE:"positive",START_NEGATIVE:"negative"}},positive:{onEntry:"addTrigger",on:{START_POSITIVE:{actions:"addTrigger"},END_POSITIVE:[{actions:"removeTrigger",cond:"isNotLastTrigger"},{target:"neutral",cond:"isLastTrigger"}]}},negative:{onEntry:"addTrigger",on:{START_NEGATIVE:{actions:"addTrigger"},END_NEGATIVE:[{actions:"removeTrigger",cond:"isNotLastTrigger"},{target:"neutral",cond:"isLastTrigger"}]}}}},y={actions:{clearTriggers:p({triggers:t=>(t.triggers.clear(),t.triggers)}),addTrigger:p({triggers:(t,e)=>(e.trigger&&t.triggers.add(e.trigger),t.triggers)}),removeTrigger:p({triggers:(t,e)=>(e.trigger&&t.triggers.delete(e.trigger),t.triggers)})},guards:{isLastTrigger:(t,e)=>(t.triggers.size&&!e.trigger&&console.warn("either use triggers with polarController or don't..."),!(t.triggers.size&&(1!==t.triggers.size||!t.triggers.has(e.trigger)))),isNotLastTrigger:(t,e)=>!!t.triggers.size&&(t.triggers.size>1||1===t.triggers.size&&!t.triggers.has(e.trigger))}},void 0===m&&(m=g.context),new f.b(g,y,m));var g,y,m;const{assign:b}=h,S=Symbol("keyboardController"),w=new Map;w.set("ArrowUp","up"),w.set("KeyW","up"),w.set("ArrowDown","down"),w.set("KeyS","down"),w.set("ArrowLeft","left"),w.set("KeyA","left"),w.set("ArrowRight","right"),w.set("KeyD","right");const O=t=>t.matches("positive")?Object(o.some)("up"):t.matches("negative")?Object(o.some)("down"):o.none,x=t=>t.matches("positive")?Object(o.some)("right"):t.matches("negative")?Object(o.some)("left"):o.none,E=Symbol("controllerMotion"),_=({limitTop:t,limitBottom:e,speed:n})=>{let r=o.none,i=o.none;return Object.assign({},j({id:E,dispose:o.none}),{update:t=>e=>a=>{r.getOrElse(null)!==t.getOrElse(null)&&(console.log("updating traj!"),t.foldL(()=>{i=Object(o.some)(()=>a)},t=>{i=Object(o.some)((t=>e=>r=>i=>t+(i-e)*n*r)(a)(e)("down"===t?-1:1))}),r=t)},getY:n=>i.chain(r=>{const i=r(n);return i<t||i>e?o.none:Object(o.some)(i)})})},T=t=>Object(i.createCollection)(t),j=({id:t,dispose:e})=>Object.assign({},Object(i.createCollectionItem)({id:t,dispose:e})),A=Symbol("ball"),M=Symbol("paddle1"),P=Symbol("paddle2"),N=t=>({canvasWidth:e,canvasHeight:n,paddleWidth:r,paddleHeight:i})=>{const a="paddle1"===t?M:P,u=C({id:a,dispose:o.none}),f=c();return a===M?(f.pos.x=r/2,f.pos.y=n/2,u.components.add((()=>{let t=O(v.initialState),e=x(v.initialState);const n=Object(d.a)(v).onTransition(e=>{t=O(e)}).start(),r=Object(d.a)(v).onTransition(t=>{e=x(t)}).start(),i=t=>"up"===t||"down"===t?n:r,a=t=>w.has(t)?Object(o.some)(w.get(t)):o.none,s=t=>e=>`${t}_${"up"===e||"right"===e?"POSITIVE":"NEGATIVE"}`;return Object.assign({},j({id:S,dispose:o.none}),{getVerticalDirection:()=>t,getHorizontalDirection:()=>e,getStart:()=>!1,updateKeyPress:t=>{a(t).map(e=>{const n=i(e),r=s("START")(e);n.send({type:r,trigger:t})})},updateKeyRelease:t=>{a(t).map(e=>{const n=i(e),r=s("END")(e);n.send({type:r,trigger:t})})}})})()),u.components.add(_({limitTop:i/2,limitBottom:n-i/2,speed:1}))):(f.pos.x=e-r/2,f.pos.y=n/2),u.components.add(f),u.components.add(s(t)),u},R=t=>{return C({id:`${t} wall`,dispose:o.none})},C=({id:t,dispose:e})=>Object.assign({},Object(i.createCollectionItem)({id:t,dispose:e}),{components:T(`${name} components`)}),L=Symbol("renderer"),I=Symbol("keyboardInput"),D=Symbol("userTransforms"),k=({id:t,dispose:e,onTick:n})=>Object.assign({},Object(i.createCollectionItem)({id:t,dispose:e}),{onTick:n});console.log("%c XState-Pong 0.0.1 (productionMode: true)",'color: #4286f4; font-size: large; font-family: "Comic Sans MS", cursive, sans-serif'),Object(r.a)().then(t=>{const e=(()=>{const t=Object(i.createCollection)();return Object.assign({},t,{listWithComponent:e=>t.listWith(t=>t.components.has(e)),listWithAnyComponents:e=>t.listWith(t=>t.components.hasAny(e)),listWithAllComponents:e=>t.listWith(t=>t.components.hasAll(e))})})(),{constants:n}=t;e.add((({canvasWidth:t,canvasHeight:e})=>{const n=C({id:A,dispose:o.none});n.components.add(s("ball"));const r=c();return r.pos.x=t/2,r.pos.y=e/2,n.components.add(r),n})(n)),e.add(N("paddle1")(n)),e.add(N("paddle2")(n)),e.add(R("left")),e.add(R("right")),e.add(R("top")),e.add(R("bottom"));const r=(()=>Object(i.createCollection)())();let f;r.add((t=>{const e=e=>{const n=e.code||e.key;t.listWithComponent(S).forEach(t=>{const r=t.components.getAs(S);"keydown"===e.type?r.updateKeyPress(n):"keyup"===e.type&&r.updateKeyRelease(n)})};document.addEventListener("keydown",e,!0),document.addEventListener("keyup",e,!0);return k({id:I,dispose:Object(o.some)(()=>{document.removeEventListener("keydown",e,!0),document.removeEventListener("keyup",e,!0)}),onTick:o.none})})(e)),r.add(k({id:D,dispose:o.none,onTick:Object(o.some)(({entities:t,systems:e,time:n})=>{t.listWithAllComponents([S,E,u]).forEach(t=>{const e=t.components.getAs(S),r=t.components.getAs(E),i=t.components.getAs(u);r.update(e.getVerticalDirection())(n)(i.pos.y),r.getY(n).map(t=>{i.pos.y=t})})})})),r.add((t=>{return k({id:L,dispose:o.none,onTick:Object(o.some)(({entities:e})=>{const n=e.listWithAllComponents([a,u]).reduce((t,e)=>{const n=e.components.getAs(u);return Object.assign({},t,{[e.name]:n.pos})},{});t.render(n)})})})(t));const l=t=>{if(f){const n=t-f;r.list().forEach(i=>{i.onTick.map(i=>i({entities:e,systems:r,time:t,deltaTime:n}))})}f=t,requestAnimationFrame(l)};requestAnimationFrame(l)})}]);